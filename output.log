== Info:   Trying 127.0.0.1...
== Info: TCP_NODELAY set
== Info: Connected to 127.0.0.1 (127.0.0.1) port 8080 (#0)
=> Send header, 152 bytes (0x98)
0000: 50 4f 53 54 20 2f 63 61 72 20 48 54 54 50 2f 31 POST /car HTTP/1
0010: 2e 31 0d 0a 48 6f 73 74 3a 20 31 32 37 2e 30 2e .1..Host: 127.0.
0020: 30 2e 31 3a 38 30 38 30 0d 0a 55 73 65 72 2d 41 0.1:8080..User-A
0030: 67 65 6e 74 3a 20 63 75 72 6c 2f 37 2e 36 34 2e gent: curl/7.64.
0040: 31 0d 0a 41 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 1..Accept: */*..
0050: 43 6f 6e 74 65 6e 74 2d 4c 65 6e 67 74 68 3a 20 Content-Length: 
0060: 33 39 38 0d 0a 43 6f 6e 74 65 6e 74 2d 54 79 70 398..Content-Typ
0070: 65 3a 20 61 70 70 6c 69 63 61 74 69 6f 6e 2f 78 e: application/x
0080: 2d 77 77 77 2d 66 6f 72 6d 2d 75 72 6c 65 6e 63 -www-form-urlenc
0090: 6f 64 65 64 0d 0a 0d 0a                         oded....
=> Send data, 398 bytes (0x18e)
0000: 7b 20 20 20 20 20 20 20 20 22 62 61 74 74 65 72 {        "batter
0010: 79 5f 76 6f 6c 74 61 67 65 22 3a 20 34 30 30 2c y_voltage": 400,
0020: 20 20 20 20 20 20 20 20 22 62 61 74 74 65 72 79         "battery
0030: 5f 63 75 72 72 65 6e 74 22 3a 20 34 30 30 2c 20 _current": 400, 
0040: 20 20 20 20 20 20 20 22 62 61 74 74 65 72 79 5f        "battery_
0050: 74 65 6d 70 65 72 61 74 75 72 65 22 3a 20 34 30 temperature": 40
0060: 30 2c 20 20 20 20 20 20 20 20 22 62 6d 73 5f 66 0,        "bms_f
0070: 61 75 6c 74 22 3a 20 31 2c 20 20 20 20 20 20 20 ault": 1,       
0080: 20 22 67 70 73 5f 74 69 6d 65 22 3a 20 34 30 30  "gps_time": 400
0090: 2c 20 20 20 20 20 20 20 20 22 67 70 73 5f 6c 61 ,        "gps_la
00a0: 74 22 3a 20 34 30 30 2c 20 20 20 20 20 20 20 20 t": 400,        
00b0: 22 67 70 73 5f 6c 6f 6e 22 3a 20 34 30 30 2c 20 "gps_lon": 400, 
00c0: 20 20 20 20 20 20 20 22 67 70 73 5f 76 65 6c 6f        "gps_velo
00d0: 63 69 74 79 5f 65 61 73 74 22 3a 34 30 30 2c 20 city_east":400, 
00e0: 20 20 20 20 20 20 20 22 67 70 73 5f 76 65 6c 6f        "gps_velo
00f0: 63 69 74 79 5f 6e 6f 72 74 68 22 3a 20 34 30 30 city_north": 400
0100: 2c 20 20 20 20 20 20 20 20 22 67 70 73 5f 76 65 ,        "gps_ve
0110: 6c 6f 63 69 74 79 5f 75 70 22 3a 20 34 30 30 2c locity_up": 400,
0120: 20 20 20 20 20 20 20 20 22 67 70 73 5f 73 70 65         "gps_spe
0130: 65 64 22 3a 20 34 30 30 2c 20 20 20 20 20 20 20 ed": 400,       
0140: 20 22 73 6f 6c 61 72 5f 76 6f 6c 74 61 67 65 22  "solar_voltage"
0150: 3a 20 34 30 30 2c 20 20 20 20 20 20 20 20 22 73 : 400,        "s
0160: 6f 6c 61 72 5f 63 75 72 72 65 6e 74 22 3a 20 34 olar_current": 4
0170: 30 30 2c 20 20 20 20 20 20 20 20 22 6d 6f 74 6f 00,        "moto
0180: 72 5f 73 70 65 65 64 22 3a 20 34 30 30 7d       r_speed": 400}
== Info: upload completely sent off: 398 out of 398 bytes
== Info: HTTP 1.0, assume close after body
<= Recv header, 36 bytes (0x24)
0000: 48 54 54 50 2f 31 2e 30 20 35 30 30 20 49 4e 54 HTTP/1.0 500 INT
0010: 45 52 4e 41 4c 20 53 45 52 56 45 52 20 45 52 52 ERNAL SERVER ERR
0020: 4f 52 0d 0a                                     OR..
<= Recv header, 40 bytes (0x28)
0000: 43 6f 6e 74 65 6e 74 2d 54 79 70 65 3a 20 74 65 Content-Type: te
0010: 78 74 2f 68 74 6d 6c 3b 20 63 68 61 72 73 65 74 xt/html; charset
0020: 3d 75 74 66 2d 38 0d 0a                         =utf-8..
<= Recv header, 21 bytes (0x15)
0000: 58 2d 58 53 53 2d 50 72 6f 74 65 63 74 69 6f 6e X-XSS-Protection
0010: 3a 20 30 0d 0a                                  : 0..
<= Recv header, 19 bytes (0x13)
0000: 43 6f 6e 6e 65 63 74 69 6f 6e 3a 20 63 6c 6f 73 Connection: clos
0010: 65 0d 0a                                        e..
<= Recv header, 37 bytes (0x25)
0000: 53 65 72 76 65 72 3a 20 57 65 72 6b 7a 65 75 67 Server: Werkzeug
0010: 2f 31 2e 30 2e 31 20 50 79 74 68 6f 6e 2f 33 2e /1.0.1 Python/3.
0020: 39 2e 31 0d 0a                                  9.1..
<= Recv header, 37 bytes (0x25)
0000: 44 61 74 65 3a 20 46 72 69 2c 20 30 35 20 4d 61 Date: Fri, 05 Ma
0010: 72 20 32 30 32 31 20 30 31 3a 33 33 3a 31 34 20 r 2021 01:33:14 
0020: 47 4d 54 0d 0a                                  GMT..
<= Recv header, 2 bytes (0x2)
0000: 0d 0a                                           ..
<= Recv data, 21834 bytes (0x554a)
0000: 3c 21 44 4f 43 54 59 50 45 20 48 54 4d 4c 20 50 <!DOCTYPE HTML P
0010: 55 42 4c 49 43 20 22 2d 2f 2f 57 33 43 2f 2f 44 UBLIC "-//W3C//D
0020: 54 44 20 48 54 4d 4c 20 34 2e 30 31 20 54 72 61 TD HTML 4.01 Tra
0030: 6e 73 69 74 69 6f 6e 61 6c 2f 2f 45 4e 22 0a 20 nsitional//EN". 
0040: 20 22 68 74 74 70 3a 2f 2f 77 77 77 2e 77 33 2e  "http://www.w3.
0050: 6f 72 67 2f 54 52 2f 68 74 6d 6c 34 2f 6c 6f 6f org/TR/html4/loo
0060: 73 65 2e 64 74 64 22 3e 0a 3c 68 74 6d 6c 3e 0a se.dtd">.<html>.
0070: 20 20 3c 68 65 61 64 3e 0a 20 20 20 20 3c 74 69   <head>.    <ti
0080: 74 6c 65 3e 4b 65 79 45 72 72 6f 72 3a 20 27 48 tle>KeyError: 'H
0090: 54 54 50 5f 41 55 54 48 45 4e 54 49 43 41 54 49 TTP_AUTHENTICATI
00a0: 4f 4e 27 20 2f 2f 20 57 65 72 6b 7a 65 75 67 20 ON' // Werkzeug 
00b0: 44 65 62 75 67 67 65 72 3c 2f 74 69 74 6c 65 3e Debugger</title>
00c0: 0a 20 20 20 20 3c 6c 69 6e 6b 20 72 65 6c 3d 22 .    <link rel="
00d0: 73 74 79 6c 65 73 68 65 65 74 22 20 68 72 65 66 stylesheet" href
00e0: 3d 22 3f 5f 5f 64 65 62 75 67 67 65 72 5f 5f 3d ="?__debugger__=
00f0: 79 65 73 26 61 6d 70 3b 63 6d 64 3d 72 65 73 6f yes&amp;cmd=reso
0100: 75 72 63 65 26 61 6d 70 3b 66 3d 73 74 79 6c 65 urce&amp;f=style
0110: 2e 63 73 73 22 0a 20 20 20 20 20 20 20 20 74 79 .css".        ty
0120: 70 65 3d 22 74 65 78 74 2f 63 73 73 22 3e 0a 20 pe="text/css">. 
0130: 20 20 20 3c 21 2d 2d 20 57 65 20 6e 65 65 64 20    <!-- We need 
0140: 74 6f 20 6d 61 6b 65 20 73 75 72 65 20 74 68 69 to make sure thi
0150: 73 20 68 61 73 20 61 20 66 61 76 69 63 6f 6e 20 s has a favicon 
0160: 73 6f 20 74 68 61 74 20 74 68 65 20 64 65 62 75 so that the debu
0170: 67 67 65 72 20 64 6f 65 73 0a 20 20 20 20 20 20 gger does.      
0180: 20 20 20 6e 6f 74 20 62 79 20 61 63 63 69 64 65    not by accide
0190: 6e 74 20 74 72 69 67 67 65 72 20 61 20 72 65 71 nt trigger a req
01a0: 75 65 73 74 20 74 6f 20 2f 66 61 76 69 63 6f 6e uest to /favicon
01b0: 2e 69 63 6f 20 77 68 69 63 68 20 6d 69 67 68 74 .ico which might
01c0: 0a 20 20 20 20 20 20 20 20 20 63 68 61 6e 67 65 .         change
01d0: 20 74 68 65 20 61 70 70 6c 69 63 61 74 69 6f 6e  the application
01e0: 20 73 74 61 74 65 2e 20 2d 2d 3e 0a 20 20 20 20  state. -->.    
01f0: 3c 6c 69 6e 6b 20 72 65 6c 3d 22 73 68 6f 72 74 <link rel="short
0200: 63 75 74 20 69 63 6f 6e 22 0a 20 20 20 20 20 20 cut icon".      
0210: 20 20 68 72 65 66 3d 22 3f 5f 5f 64 65 62 75 67   href="?__debug
0220: 67 65 72 5f 5f 3d 79 65 73 26 61 6d 70 3b 63 6d ger__=yes&amp;cm
0230: 64 3d 72 65 73 6f 75 72 63 65 26 61 6d 70 3b 66 d=resource&amp;f
0240: 3d 63 6f 6e 73 6f 6c 65 2e 70 6e 67 22 3e 0a 20 =console.png">. 
0250: 20 20 20 3c 73 63 72 69 70 74 20 73 72 63 3d 22    <script src="
0260: 3f 5f 5f 64 65 62 75 67 67 65 72 5f 5f 3d 79 65 ?__debugger__=ye
0270: 73 26 61 6d 70 3b 63 6d 64 3d 72 65 73 6f 75 72 s&amp;cmd=resour
0280: 63 65 26 61 6d 70 3b 66 3d 6a 71 75 65 72 79 2e ce&amp;f=jquery.
0290: 6a 73 22 3e 3c 2f 73 63 72 69 70 74 3e 0a 20 20 js"></script>.  
02a0: 20 20 3c 73 63 72 69 70 74 20 73 72 63 3d 22 3f   <script src="?
02b0: 5f 5f 64 65 62 75 67 67 65 72 5f 5f 3d 79 65 73 __debugger__=yes
02c0: 26 61 6d 70 3b 63 6d 64 3d 72 65 73 6f 75 72 63 &amp;cmd=resourc
02d0: 65 26 61 6d 70 3b 66 3d 64 65 62 75 67 67 65 72 e&amp;f=debugger
02e0: 2e 6a 73 22 3e 3c 2f 73 63 72 69 70 74 3e 0a 20 .js"></script>. 
02f0: 20 20 20 3c 73 63 72 69 70 74 20 74 79 70 65 3d    <script type=
0300: 22 74 65 78 74 2f 6a 61 76 61 73 63 72 69 70 74 "text/javascript
0310: 22 3e 0a 20 20 20 20 20 20 76 61 72 20 54 52 41 ">.      var TRA
0320: 43 45 42 41 43 4b 20 3d 20 34 35 32 38 31 38 32 CEBACK = 4528182
0330: 32 32 34 2c 0a 20 20 20 20 20 20 20 20 20 20 43 224,.          C
0340: 4f 4e 53 4f 4c 45 5f 4d 4f 44 45 20 3d 20 66 61 ONSOLE_MODE = fa
0350: 6c 73 65 2c 0a 20 20 20 20 20 20 20 20 20 20 45 lse,.          E
0360: 56 41 4c 45 58 20 3d 20 74 72 75 65 2c 0a 20 20 VALEX = true,.  
0370: 20 20 20 20 20 20 20 20 45 56 41 4c 45 58 5f 54         EVALEX_T
0380: 52 55 53 54 45 44 20 3d 20 66 61 6c 73 65 2c 0a RUSTED = false,.
0390: 20 20 20 20 20 20 20 20 20 20 53 45 43 52 45 54           SECRET
03a0: 20 3d 20 22 55 69 57 65 38 6e 72 32 32 51 6e 77  = "UiWe8nr22Qnw
03b0: 62 73 5a 76 64 4e 52 6f 22 3b 0a 20 20 20 20 3c bsZvdNRo";.    <
03c0: 2f 73 63 72 69 70 74 3e 0a 20 20 3c 2f 68 65 61 /script>.  </hea
03d0: 64 3e 0a 20 20 3c 62 6f 64 79 20 73 74 79 6c 65 d>.  <body style
03e0: 3d 22 62 61 63 6b 67 72 6f 75 6e 64 2d 63 6f 6c ="background-col
03f0: 6f 72 3a 20 23 66 66 66 22 3e 0a 20 20 20 20 3c or: #fff">.    <
0400: 64 69 76 20 63 6c 61 73 73 3d 22 64 65 62 75 67 div class="debug
0410: 67 65 72 22 3e 0a 3c 68 31 3e 4b 65 79 45 72 72 ger">.<h1>KeyErr
0420: 6f 72 3c 2f 68 31 3e 0a 3c 64 69 76 20 63 6c 61 or</h1>.<div cla
0430: 73 73 3d 22 64 65 74 61 69 6c 22 3e 0a 20 20 3c ss="detail">.  <
0440: 70 20 63 6c 61 73 73 3d 22 65 72 72 6f 72 6d 73 p class="errorms
0450: 67 22 3e 4b 65 79 45 72 72 6f 72 3a 20 27 48 54 g">KeyError: 'HT
0460: 54 50 5f 41 55 54 48 45 4e 54 49 43 41 54 49 4f TP_AUTHENTICATIO
0470: 4e 27 3c 2f 70 3e 0a 3c 2f 64 69 76 3e 0a 3c 68 N'</p>.</div>.<h
0480: 32 20 63 6c 61 73 73 3d 22 74 72 61 63 65 62 61 2 class="traceba
0490: 63 6b 22 3e 54 72 61 63 65 62 61 63 6b 20 3c 65 ck">Traceback <e
04a0: 6d 3e 28 6d 6f 73 74 20 72 65 63 65 6e 74 20 63 m>(most recent c
04b0: 61 6c 6c 20 6c 61 73 74 29 3c 2f 65 6d 3e 3c 2f all last)</em></
04c0: 68 32 3e 0a 3c 64 69 76 20 63 6c 61 73 73 3d 22 h2>.<div class="
04d0: 74 72 61 63 65 62 61 63 6b 22 3e 0a 20 20 0a 20 traceback">.  . 
04e0: 20 3c 75 6c 3e 3c 6c 69 3e 3c 64 69 76 20 63 6c  <ul><li><div cl
04f0: 61 73 73 3d 22 66 72 61 6d 65 22 20 69 64 3d 22 ass="frame" id="
0500: 66 72 61 6d 65 2d 34 35 32 38 31 38 32 34 36 34 frame-4528182464
0510: 22 3e 0a 20 20 3c 68 34 3e 46 69 6c 65 20 3c 63 ">.  <h4>File <c
0520: 69 74 65 20 63 6c 61 73 73 3d 22 66 69 6c 65 6e ite class="filen
0530: 61 6d 65 22 3e 22 2f 75 73 72 2f 6c 6f 63 61 6c ame">"/usr/local
0540: 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f 73 /lib/python3.9/s
0550: 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c 61 ite-packages/fla
0560: 73 6b 2f 61 70 70 2e 70 79 22 3c 2f 63 69 74 65 sk/app.py"</cite
0570: 3e 2c 0a 20 20 20 20 20 20 6c 69 6e 65 20 3c 65 >,.      line <e
0580: 6d 20 63 6c 61 73 73 3d 22 6c 69 6e 65 22 3e 32 m class="line">2
0590: 34 36 34 3c 2f 65 6d 3e 2c 0a 20 20 20 20 20 20 464</em>,.      
05a0: 69 6e 20 3c 63 6f 64 65 20 63 6c 61 73 73 3d 22 in <code class="
05b0: 66 75 6e 63 74 69 6f 6e 22 3e 5f 5f 63 61 6c 6c function">__call
05c0: 5f 5f 3c 2f 63 6f 64 65 3e 3c 2f 68 34 3e 0a 20 __</code></h4>. 
05d0: 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 73 6f 75  <div class="sou
05e0: 72 63 65 20 22 3e 3c 70 72 65 20 63 6c 61 73 73 rce "><pre class
05f0: 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c ="line before"><
0600: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
0610: 3c 2f 73 70 61 6e 3e 20 3c 2f 70 72 65 3e 0a 3c </span> </pre>.<
0620: 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 pre class="line 
0630: 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c before"><span cl
0640: 61 73 73 3d 22 77 73 22 3e 20 20 20 20 3c 2f 73 ass="ws">    </s
0650: 70 61 6e 3e 64 65 66 20 5f 5f 63 61 6c 6c 5f 5f pan>def __call__
0660: 28 73 65 6c 66 2c 20 65 6e 76 69 72 6f 6e 2c 20 (self, environ, 
0670: 73 74 61 72 74 5f 72 65 73 70 6f 6e 73 65 29 3a start_response):
0680: 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 </pre>.<pre clas
0690: 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e s="line before">
06a0: 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 <span class="ws"
06b0: 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e >        </span>
06c0: 26 71 75 6f 74 3b 26 71 75 6f 74 3b 26 71 75 6f &quot;&quot;&quo
06d0: 74 3b 54 68 65 20 57 53 47 49 20 73 65 72 76 65 t;The WSGI serve
06e0: 72 20 63 61 6c 6c 73 20 74 68 65 20 46 6c 61 73 r calls the Flas
06f0: 6b 20 61 70 70 6c 69 63 61 74 69 6f 6e 20 6f 62 k application ob
0700: 6a 65 63 74 20 61 73 20 74 68 65 3c 2f 70 72 65 ject as the</pre
0710: 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 >.<pre class="li
0720: 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e ne before"><span
0730: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
0740: 20 20 20 20 3c 2f 73 70 61 6e 3e 57 53 47 49 20     </span>WSGI 
0750: 61 70 70 6c 69 63 61 74 69 6f 6e 2e 20 54 68 69 application. Thi
0760: 73 20 63 61 6c 6c 73 20 3a 6d 65 74 68 3a 60 77 s calls :meth:`w
0770: 73 67 69 5f 61 70 70 60 20 77 68 69 63 68 20 63 sgi_app` which c
0780: 61 6e 20 62 65 3c 2f 70 72 65 3e 0a 3c 70 72 65 an be</pre>.<pre
0790: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66  class="line bef
07a0: 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 ore"><span class
07b0: 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f ="ws">        </
07c0: 73 70 61 6e 3e 77 72 61 70 70 65 64 20 74 6f 20 span>wrapped to 
07d0: 61 70 70 6c 79 69 6e 67 20 6d 69 64 64 6c 65 77 applying middlew
07e0: 61 72 65 2e 26 71 75 6f 74 3b 26 71 75 6f 74 3b are.&quot;&quot;
07f0: 26 71 75 6f 74 3b 3c 2f 70 72 65 3e 0a 3c 70 72 &quot;</pre>.<pr
0800: 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 63 75 e class="line cu
0810: 72 72 65 6e 74 22 3e 3c 73 70 61 6e 20 63 6c 61 rrent"><span cla
0820: 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 ss="ws">        
0830: 3c 2f 73 70 61 6e 3e 72 65 74 75 72 6e 20 73 65 </span>return se
0840: 6c 66 2e 77 73 67 69 5f 61 70 70 28 65 6e 76 69 lf.wsgi_app(envi
0850: 72 6f 6e 2c 20 73 74 61 72 74 5f 72 65 73 70 6f ron, start_respo
0860: 6e 73 65 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 nse)</pre>.<pre 
0870: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 class="line afte
0880: 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 r"><span class="
0890: 77 73 22 3e 3c 2f 73 70 61 6e 3e 20 3c 2f 70 72 ws"></span> </pr
08a0: 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c e>.<pre class="l
08b0: 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e ine after"><span
08c0: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
08d0: 3c 2f 73 70 61 6e 3e 64 65 66 20 5f 5f 72 65 70 </span>def __rep
08e0: 72 5f 5f 28 73 65 6c 66 29 3a 3c 2f 70 72 65 3e r__(self):</pre>
08f0: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
0900: 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 e after"><span c
0910: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 lass="ws">      
0920: 20 20 3c 2f 73 70 61 6e 3e 72 65 74 75 72 6e 20   </span>return 
0930: 26 71 75 6f 74 3b 26 6c 74 3b 25 73 20 25 72 26 &quot;&lt;%s %r&
0940: 67 74 3b 26 71 75 6f 74 3b 20 25 20 28 73 65 6c gt;&quot; % (sel
0950: 66 2e 5f 5f 63 6c 61 73 73 5f 5f 2e 5f 5f 6e 61 f.__class__.__na
0960: 6d 65 5f 5f 2c 20 73 65 6c 66 2e 6e 61 6d 65 29 me__, self.name)
0970: 3c 2f 70 72 65 3e 3c 2f 64 69 76 3e 0a 3c 2f 64 </pre></div>.</d
0980: 69 76 3e 0a 0a 3c 6c 69 3e 3c 64 69 76 20 63 6c iv>..<li><div cl
0990: 61 73 73 3d 22 66 72 61 6d 65 22 20 69 64 3d 22 ass="frame" id="
09a0: 66 72 61 6d 65 2d 34 35 32 38 31 38 32 31 32 38 frame-4528182128
09b0: 22 3e 0a 20 20 3c 68 34 3e 46 69 6c 65 20 3c 63 ">.  <h4>File <c
09c0: 69 74 65 20 63 6c 61 73 73 3d 22 66 69 6c 65 6e ite class="filen
09d0: 61 6d 65 22 3e 22 2f 75 73 72 2f 6c 6f 63 61 6c ame">"/usr/local
09e0: 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f 73 /lib/python3.9/s
09f0: 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c 61 ite-packages/fla
0a00: 73 6b 2f 61 70 70 2e 70 79 22 3c 2f 63 69 74 65 sk/app.py"</cite
0a10: 3e 2c 0a 20 20 20 20 20 20 6c 69 6e 65 20 3c 65 >,.      line <e
0a20: 6d 20 63 6c 61 73 73 3d 22 6c 69 6e 65 22 3e 32 m class="line">2
0a30: 34 35 30 3c 2f 65 6d 3e 2c 0a 20 20 20 20 20 20 450</em>,.      
0a40: 69 6e 20 3c 63 6f 64 65 20 63 6c 61 73 73 3d 22 in <code class="
0a50: 66 75 6e 63 74 69 6f 6e 22 3e 77 73 67 69 5f 61 function">wsgi_a
0a60: 70 70 3c 2f 63 6f 64 65 3e 3c 2f 68 34 3e 0a 20 pp</code></h4>. 
0a70: 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 73 6f 75  <div class="sou
0a80: 72 63 65 20 22 3e 3c 70 72 65 20 63 6c 61 73 73 rce "><pre class
0a90: 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c ="line before"><
0aa0: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
0ab0: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70             </sp
0ac0: 61 6e 3e 74 72 79 3a 3c 2f 70 72 65 3e 0a 3c 70 an>try:</pre>.<p
0ad0: 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 re class="line b
0ae0: 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 efore"><span cla
0af0: 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 ss="ws">        
0b00: 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 63         </span>c
0b10: 74 78 2e 70 75 73 68 28 29 3c 2f 70 72 65 3e 0a tx.push()</pre>.
0b20: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
0b30: 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63  before"><span c
0b40: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 lass="ws">      
0b50: 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e           </span
0b60: 3e 72 65 73 70 6f 6e 73 65 20 3d 20 73 65 6c 66 >response = self
0b70: 2e 66 75 6c 6c 5f 64 69 73 70 61 74 63 68 5f 72 .full_dispatch_r
0b80: 65 71 75 65 73 74 28 29 3c 2f 70 72 65 3e 0a 3c equest()</pre>.<
0b90: 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 pre class="line 
0ba0: 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c before"><span cl
0bb0: 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 ass="ws">       
0bc0: 20 20 20 20 20 3c 2f 73 70 61 6e 3e 65 78 63 65      </span>exce
0bd0: 70 74 20 45 78 63 65 70 74 69 6f 6e 20 61 73 20 pt Exception as 
0be0: 65 3a 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c e:</pre>.<pre cl
0bf0: 61 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 ass="line before
0c00: 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 "><span class="w
0c10: 73 22 3e 20 20 20 20 20 20 20 20 20 20 20 20 20 s">             
0c20: 20 20 20 3c 2f 73 70 61 6e 3e 65 72 72 6f 72 20    </span>error 
0c30: 3d 20 65 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 = e</pre>.<pre c
0c40: 6c 61 73 73 3d 22 6c 69 6e 65 20 63 75 72 72 65 lass="line curre
0c50: 6e 74 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d nt"><span class=
0c60: 22 77 73 22 3e 20 20 20 20 20 20 20 20 20 20 20 "ws">           
0c70: 20 20 20 20 20 3c 2f 73 70 61 6e 3e 72 65 73 70      </span>resp
0c80: 6f 6e 73 65 20 3d 20 73 65 6c 66 2e 68 61 6e 64 onse = self.hand
0c90: 6c 65 5f 65 78 63 65 70 74 69 6f 6e 28 65 29 3c le_exception(e)<
0ca0: 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 /pre>.<pre class
0cb0: 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 ="line after"><s
0cc0: 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 pan class="ws"> 
0cd0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61            </spa
0ce0: 6e 3e 65 78 63 65 70 74 3a 20 20 23 20 6e 6f 71 n>except:  # noq
0cf0: 61 3a 20 42 30 30 31 3c 2f 70 72 65 3e 0a 3c 70 a: B001</pre>.<p
0d00: 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 re class="line a
0d10: 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 fter"><span clas
0d20: 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 20 s="ws">         
0d30: 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 65 72        </span>er
0d40: 72 6f 72 20 3d 20 73 79 73 2e 65 78 63 5f 69 6e ror = sys.exc_in
0d50: 66 6f 28 29 5b 31 5d 3c 2f 70 72 65 3e 0a 3c 70 fo()[1]</pre>.<p
0d60: 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 re class="line a
0d70: 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 fter"><span clas
0d80: 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 20 s="ws">         
0d90: 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 72 61        </span>ra
0da0: 69 73 65 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 ise</pre>.<pre c
0db0: 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 lass="line after
0dc0: 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 "><span class="w
0dd0: 73 22 3e 20 20 20 20 20 20 20 20 20 20 20 20 3c s">            <
0de0: 2f 73 70 61 6e 3e 72 65 74 75 72 6e 20 72 65 73 /span>return res
0df0: 70 6f 6e 73 65 28 65 6e 76 69 72 6f 6e 2c 20 73 ponse(environ, s
0e00: 74 61 72 74 5f 72 65 73 70 6f 6e 73 65 29 3c 2f tart_response)</
0e10: 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d pre>.<pre class=
0e20: 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 "line after"><sp
0e30: 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 an class="ws">  
0e40: 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 66 69 6e       </span>fin
0e50: 61 6c 6c 79 3a 3c 2f 70 72 65 3e 3c 2f 64 69 76 ally:</pre></div
0e60: 3e 0a 3c 2f 64 69 76 3e 0a 0a 3c 6c 69 3e 3c 64 >.</div>..<li><d
0e70: 69 76 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 22 iv class="frame"
0e80: 20 69 64 3d 22 66 72 61 6d 65 2d 34 35 32 38 31  id="frame-45281
0e90: 38 35 32 30 30 22 3e 0a 20 20 3c 68 34 3e 46 69 85200">.  <h4>Fi
0ea0: 6c 65 20 3c 63 69 74 65 20 63 6c 61 73 73 3d 22 le <cite class="
0eb0: 66 69 6c 65 6e 61 6d 65 22 3e 22 2f 75 73 72 2f filename">"/usr/
0ec0: 6c 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e local/lib/python
0ed0: 33 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 3.9/site-package
0ee0: 73 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 79 22 3c s/flask/app.py"<
0ef0: 2f 63 69 74 65 3e 2c 0a 20 20 20 20 20 20 6c 69 /cite>,.      li
0f00: 6e 65 20 3c 65 6d 20 63 6c 61 73 73 3d 22 6c 69 ne <em class="li
0f10: 6e 65 22 3e 31 38 36 37 3c 2f 65 6d 3e 2c 0a 20 ne">1867</em>,. 
0f20: 20 20 20 20 20 69 6e 20 3c 63 6f 64 65 20 63 6c      in <code cl
0f30: 61 73 73 3d 22 66 75 6e 63 74 69 6f 6e 22 3e 68 ass="function">h
0f40: 61 6e 64 6c 65 5f 65 78 63 65 70 74 69 6f 6e 3c andle_exception<
0f50: 2f 63 6f 64 65 3e 3c 2f 68 34 3e 0a 20 20 3c 64 /code></h4>.  <d
0f60: 69 76 20 63 6c 61 73 73 3d 22 73 6f 75 72 63 65 iv class="source
0f70: 20 22 3e 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c  "><pre class="l
0f80: 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 ine before"><spa
0f90: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
0fa0: 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e          </span>
0fb0: 23 20 69 66 20 77 65 20 77 61 6e 74 20 74 6f 20 # if we want to 
0fc0: 72 65 70 72 6f 70 61 67 61 74 65 20 74 68 65 20 repropagate the 
0fd0: 65 78 63 65 70 74 69 6f 6e 2c 20 77 65 20 63 61 exception, we ca
0fe0: 6e 20 61 74 74 65 6d 70 74 20 74 6f 3c 2f 70 72 n attempt to</pr
0ff0: 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c e>.<pre class="l
1000: 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 ine before"><spa
1010: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
1020: 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e          </span>
1030: 23 20 72 61 69 73 65 20 69 74 20 77 69 74 68 20 # raise it with 
1040: 74 68 65 20 77 68 6f 6c 65 20 74 72 61 63 65 62 the whole traceb
1050: 61 63 6b 20 69 6e 20 63 61 73 65 20 77 65 20 63 ack in case we c
1060: 61 6e 20 64 6f 20 74 68 61 74 3c 2f 70 72 65 3e an do that</pre>
1070: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
1080: 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 e before"><span 
1090: 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 class="ws">     
10a0: 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 23 20        </span># 
10b0: 28 74 68 65 20 66 75 6e 63 74 69 6f 6e 20 77 61 (the function wa
10c0: 73 20 61 63 74 75 61 6c 6c 79 20 63 61 6c 6c 65 s actually calle
10d0: 64 20 66 72 6f 6d 20 74 68 65 20 65 78 63 65 70 d from the excep
10e0: 74 20 70 61 72 74 29 3c 2f 70 72 65 3e 0a 3c 70 t part)</pre>.<p
10f0: 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 re class="line b
1100: 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 efore"><span cla
1110: 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 ss="ws">        
1120: 20 20 20 20 3c 2f 73 70 61 6e 3e 23 20 6f 74 68     </span># oth
1130: 65 72 77 69 73 65 2c 20 77 65 20 6a 75 73 74 20 erwise, we just 
1140: 72 61 69 73 65 20 74 68 65 20 65 72 72 6f 72 20 raise the error 
1150: 61 67 61 69 6e 3c 2f 70 72 65 3e 0a 3c 70 72 65 again</pre>.<pre
1160: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66  class="line bef
1170: 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 ore"><span class
1180: 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 20 20 ="ws">          
1190: 20 20 3c 2f 73 70 61 6e 3e 69 66 20 65 78 63 5f   </span>if exc_
11a0: 76 61 6c 75 65 20 69 73 20 65 3a 3c 2f 70 72 65 value is e:</pre
11b0: 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 >.<pre class="li
11c0: 6e 65 20 63 75 72 72 65 6e 74 22 3e 3c 73 70 61 ne current"><spa
11d0: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
11e0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73              </s
11f0: 70 61 6e 3e 72 65 72 61 69 73 65 28 65 78 63 5f pan>reraise(exc_
1200: 74 79 70 65 2c 20 65 78 63 5f 76 61 6c 75 65 2c type, exc_value,
1210: 20 74 62 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 20  tb)</pre>.<pre 
1220: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 class="line afte
1230: 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 r"><span class="
1240: 77 73 22 3e 20 20 20 20 20 20 20 20 20 20 20 20 ws">            
1250: 3c 2f 73 70 61 6e 3e 65 6c 73 65 3a 3c 2f 70 72 </span>else:</pr
1260: 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c e>.<pre class="l
1270: 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e ine after"><span
1280: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
1290: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70             </sp
12a0: 61 6e 3e 72 61 69 73 65 20 65 3c 2f 70 72 65 3e an>raise e</pre>
12b0: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
12c0: 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 e after"><span c
12d0: 6c 61 73 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e lass="ws"></span
12e0: 3e 20 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c > </pre>.<pre cl
12f0: 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 ass="line after"
1300: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
1310: 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e ">        </span
1320: 3e 73 65 6c 66 2e 6c 6f 67 5f 65 78 63 65 70 74 >self.log_except
1330: 69 6f 6e 28 28 65 78 63 5f 74 79 70 65 2c 20 65 ion((exc_type, e
1340: 78 63 5f 76 61 6c 75 65 2c 20 74 62 29 29 3c 2f xc_value, tb))</
1350: 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d pre>.<pre class=
1360: 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 "line after"><sp
1370: 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 an class="ws">  
1380: 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 73 65 72       </span>ser
1390: 76 65 72 5f 65 72 72 6f 72 20 3d 20 49 6e 74 65 ver_error = Inte
13a0: 72 6e 61 6c 53 65 72 76 65 72 45 72 72 6f 72 28 rnalServerError(
13b0: 29 3c 2f 70 72 65 3e 3c 2f 64 69 76 3e 0a 3c 2f )</pre></div>.</
13c0: 64 69 76 3e 0a 0a 3c 6c 69 3e 3c 64 69 76 20 63 div>..<li><div c
13d0: 6c 61 73 73 3d 22 66 72 61 6d 65 22 20 69 64 3d lass="frame" id=
13e0: 22 66 72 61 6d 65 2d 34 35 32 38 31 38 34 37 32 "frame-452818472
13f0: 30 22 3e 0a 20 20 3c 68 34 3e 46 69 6c 65 20 3c 0">.  <h4>File <
1400: 63 69 74 65 20 63 6c 61 73 73 3d 22 66 69 6c 65 cite class="file
1410: 6e 61 6d 65 22 3e 22 2f 75 73 72 2f 6c 6f 63 61 name">"/usr/loca
1420: 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f l/lib/python3.9/
1430: 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c site-packages/fl
1440: 61 73 6b 2f 5f 63 6f 6d 70 61 74 2e 70 79 22 3c ask/_compat.py"<
1450: 2f 63 69 74 65 3e 2c 0a 20 20 20 20 20 20 6c 69 /cite>,.      li
1460: 6e 65 20 3c 65 6d 20 63 6c 61 73 73 3d 22 6c 69 ne <em class="li
1470: 6e 65 22 3e 33 39 3c 2f 65 6d 3e 2c 0a 20 20 20 ne">39</em>,.   
1480: 20 20 20 69 6e 20 3c 63 6f 64 65 20 63 6c 61 73    in <code clas
1490: 73 3d 22 66 75 6e 63 74 69 6f 6e 22 3e 72 65 72 s="function">rer
14a0: 61 69 73 65 3c 2f 63 6f 64 65 3e 3c 2f 68 34 3e aise</code></h4>
14b0: 0a 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 73 .  <div class="s
14c0: 6f 75 72 63 65 20 22 3e 3c 70 72 65 20 63 6c 61 ource "><pre cla
14d0: 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 ss="line before"
14e0: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
14f0: 22 3e 20 20 20 20 3c 2f 73 70 61 6e 3e 69 6d 70 ">    </span>imp
1500: 6f 72 74 20 63 6f 6c 6c 65 63 74 69 6f 6e 73 2e ort collections.
1510: 61 62 63 20 61 73 20 63 6f 6c 6c 65 63 74 69 6f abc as collectio
1520: 6e 73 5f 61 62 63 3c 2f 70 72 65 3e 0a 3c 70 72 ns_abc</pre>.<pr
1530: 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 e class="line be
1540: 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 fore"><span clas
1550: 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e 3e 20 3c s="ws"></span> <
1560: 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 /pre>.<pre class
1570: 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c ="line before"><
1580: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
1590: 20 20 20 20 3c 2f 73 70 61 6e 3e 64 65 66 20 72     </span>def r
15a0: 65 72 61 69 73 65 28 74 70 2c 20 76 61 6c 75 65 eraise(tp, value
15b0: 2c 20 74 62 3d 4e 6f 6e 65 29 3a 3c 2f 70 72 65 , tb=None):</pre
15c0: 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 >.<pre class="li
15d0: 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e ne before"><span
15e0: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
15f0: 20 20 20 20 3c 2f 73 70 61 6e 3e 69 66 20 76 61     </span>if va
1600: 6c 75 65 2e 5f 5f 74 72 61 63 65 62 61 63 6b 5f lue.__traceback_
1610: 5f 20 69 73 20 6e 6f 74 20 74 62 3a 3c 2f 70 72 _ is not tb:</pr
1620: 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c e>.<pre class="l
1630: 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 ine before"><spa
1640: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
1650: 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e          </span>
1660: 72 61 69 73 65 20 76 61 6c 75 65 2e 77 69 74 68 raise value.with
1670: 5f 74 72 61 63 65 62 61 63 6b 28 74 62 29 3c 2f _traceback(tb)</
1680: 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d pre>.<pre class=
1690: 22 6c 69 6e 65 20 63 75 72 72 65 6e 74 22 3e 3c "line current"><
16a0: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
16b0: 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 72         </span>r
16c0: 61 69 73 65 20 76 61 6c 75 65 3c 2f 70 72 65 3e aise value</pre>
16d0: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
16e0: 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 e after"><span c
16f0: 6c 61 73 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e lass="ws"></span
1700: 3e 20 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c > </pre>.<pre cl
1710: 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 ass="line after"
1720: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
1730: 22 3e 20 20 20 20 3c 2f 73 70 61 6e 3e 69 6d 70 ">    </span>imp
1740: 6c 65 6d 65 6e 74 73 5f 74 6f 5f 73 74 72 69 6e lements_to_strin
1750: 67 20 3d 20 5f 69 64 65 6e 74 69 74 79 3c 2f 70 g = _identity</p
1760: 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 re>.<pre class="
1770: 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 61 line after"><spa
1780: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 3c 2f 73 n class="ws"></s
1790: 70 61 6e 3e 20 3c 2f 70 72 65 3e 0a 3c 70 72 65 pan> </pre>.<pre
17a0: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74  class="line aft
17b0: 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d er"><span class=
17c0: 22 77 73 22 3e 3c 2f 73 70 61 6e 3e 65 6c 73 65 "ws"></span>else
17d0: 3a 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 :</pre>.<pre cla
17e0: 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e ss="line after">
17f0: 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 <span class="ws"
1800: 3e 20 20 20 20 3c 2f 73 70 61 6e 3e 69 74 65 72 >    </span>iter
1810: 6b 65 79 73 20 3d 20 6c 61 6d 62 64 61 20 64 3a keys = lambda d:
1820: 20 64 2e 69 74 65 72 6b 65 79 73 28 29 3c 2f 70  d.iterkeys()</p
1830: 72 65 3e 3c 2f 64 69 76 3e 0a 3c 2f 64 69 76 3e re></div>.</div>
1840: 0a 0a 3c 6c 69 3e 3c 64 69 76 20 63 6c 61 73 73 ..<li><div class
1850: 3d 22 66 72 61 6d 65 22 20 69 64 3d 22 66 72 61 ="frame" id="fra
1860: 6d 65 2d 34 35 32 38 31 38 34 39 36 30 22 3e 0a me-4528184960">.
1870: 20 20 3c 68 34 3e 46 69 6c 65 20 3c 63 69 74 65   <h4>File <cite
1880: 20 63 6c 61 73 73 3d 22 66 69 6c 65 6e 61 6d 65  class="filename
1890: 22 3e 22 2f 75 73 72 2f 6c 6f 63 61 6c 2f 6c 69 ">"/usr/local/li
18a0: 62 2f 70 79 74 68 6f 6e 33 2e 39 2f 73 69 74 65 b/python3.9/site
18b0: 2d 70 61 63 6b 61 67 65 73 2f 66 6c 61 73 6b 2f -packages/flask/
18c0: 61 70 70 2e 70 79 22 3c 2f 63 69 74 65 3e 2c 0a app.py"</cite>,.
18d0: 20 20 20 20 20 20 6c 69 6e 65 20 3c 65 6d 20 63       line <em c
18e0: 6c 61 73 73 3d 22 6c 69 6e 65 22 3e 32 34 34 37 lass="line">2447
18f0: 3c 2f 65 6d 3e 2c 0a 20 20 20 20 20 20 69 6e 20 </em>,.      in 
1900: 3c 63 6f 64 65 20 63 6c 61 73 73 3d 22 66 75 6e <code class="fun
1910: 63 74 69 6f 6e 22 3e 77 73 67 69 5f 61 70 70 3c ction">wsgi_app<
1920: 2f 63 6f 64 65 3e 3c 2f 68 34 3e 0a 20 20 3c 64 /code></h4>.  <d
1930: 69 76 20 63 6c 61 73 73 3d 22 73 6f 75 72 63 65 iv class="source
1940: 20 22 3e 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c  "><pre class="l
1950: 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 ine before"><spa
1960: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
1970: 20 20 20 20 20 3c 2f 73 70 61 6e 3e 63 74 78 20      </span>ctx 
1980: 3d 20 73 65 6c 66 2e 72 65 71 75 65 73 74 5f 63 = self.request_c
1990: 6f 6e 74 65 78 74 28 65 6e 76 69 72 6f 6e 29 3c ontext(environ)<
19a0: 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 /pre>.<pre class
19b0: 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c ="line before"><
19c0: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
19d0: 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 65         </span>e
19e0: 72 72 6f 72 20 3d 20 4e 6f 6e 65 3c 2f 70 72 65 rror = None</pre
19f0: 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 >.<pre class="li
1a00: 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e ne before"><span
1a10: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
1a20: 20 20 20 20 3c 2f 73 70 61 6e 3e 74 72 79 3a 3c     </span>try:<
1a30: 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 /pre>.<pre class
1a40: 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c ="line before"><
1a50: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
1a60: 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70             </sp
1a70: 61 6e 3e 74 72 79 3a 3c 2f 70 72 65 3e 0a 3c 70 an>try:</pre>.<p
1a80: 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 re class="line b
1a90: 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 efore"><span cla
1aa0: 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 ss="ws">        
1ab0: 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 63         </span>c
1ac0: 74 78 2e 70 75 73 68 28 29 3c 2f 70 72 65 3e 0a tx.push()</pre>.
1ad0: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
1ae0: 20 63 75 72 72 65 6e 74 22 3e 3c 73 70 61 6e 20  current"><span 
1af0: 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 class="ws">     
1b00: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61            </spa
1b10: 6e 3e 72 65 73 70 6f 6e 73 65 20 3d 20 73 65 6c n>response = sel
1b20: 66 2e 66 75 6c 6c 5f 64 69 73 70 61 74 63 68 5f f.full_dispatch_
1b30: 72 65 71 75 65 73 74 28 29 3c 2f 70 72 65 3e 0a request()</pre>.
1b40: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
1b50: 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c  after"><span cl
1b60: 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 ass="ws">       
1b70: 20 20 20 20 20 3c 2f 73 70 61 6e 3e 65 78 63 65      </span>exce
1b80: 70 74 20 45 78 63 65 70 74 69 6f 6e 20 61 73 20 pt Exception as 
1b90: 65 3a 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c e:</pre>.<pre cl
1ba0: 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 ass="line after"
1bb0: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
1bc0: 22 3e 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ">              
1bd0: 20 20 3c 2f 73 70 61 6e 3e 65 72 72 6f 72 20 3d   </span>error =
1be0: 20 65 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c  e</pre>.<pre cl
1bf0: 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 ass="line after"
1c00: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
1c10: 22 3e 20 20 20 20 20 20 20 20 20 20 20 20 20 20 ">              
1c20: 20 20 3c 2f 73 70 61 6e 3e 72 65 73 70 6f 6e 73   </span>respons
1c30: 65 20 3d 20 73 65 6c 66 2e 68 61 6e 64 6c 65 5f e = self.handle_
1c40: 65 78 63 65 70 74 69 6f 6e 28 65 29 3c 2f 70 72 exception(e)</pr
1c50: 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c e>.<pre class="l
1c60: 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e ine after"><span
1c70: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
1c80: 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 65         </span>e
1c90: 78 63 65 70 74 3a 20 20 23 20 6e 6f 71 61 3a 20 xcept:  # noqa: 
1ca0: 42 30 30 31 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 B001</pre>.<pre 
1cb0: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 class="line afte
1cc0: 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 r"><span class="
1cd0: 77 73 22 3e 20 20 20 20 20 20 20 20 20 20 20 20 ws">            
1ce0: 20 20 20 20 3c 2f 73 70 61 6e 3e 65 72 72 6f 72     </span>error
1cf0: 20 3d 20 73 79 73 2e 65 78 63 5f 69 6e 66 6f 28  = sys.exc_info(
1d00: 29 5b 31 5d 3c 2f 70 72 65 3e 3c 2f 64 69 76 3e )[1]</pre></div>
1d10: 0a 3c 2f 64 69 76 3e 0a 0a 3c 6c 69 3e 3c 64 69 .</div>..<li><di
1d20: 76 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 22 20 v class="frame" 
1d30: 69 64 3d 22 66 72 61 6d 65 2d 34 35 32 38 31 38 id="frame-452818
1d40: 34 31 39 32 22 3e 0a 20 20 3c 68 34 3e 46 69 6c 4192">.  <h4>Fil
1d50: 65 20 3c 63 69 74 65 20 63 6c 61 73 73 3d 22 66 e <cite class="f
1d60: 69 6c 65 6e 61 6d 65 22 3e 22 2f 75 73 72 2f 6c ilename">"/usr/l
1d70: 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 ocal/lib/python3
1d80: 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 .9/site-packages
1d90: 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 79 22 3c 2f /flask/app.py"</
1da0: 63 69 74 65 3e 2c 0a 20 20 20 20 20 20 6c 69 6e cite>,.      lin
1db0: 65 20 3c 65 6d 20 63 6c 61 73 73 3d 22 6c 69 6e e <em class="lin
1dc0: 65 22 3e 31 39 35 32 3c 2f 65 6d 3e 2c 0a 20 20 e">1952</em>,.  
1dd0: 20 20 20 20 69 6e 20 3c 63 6f 64 65 20 63 6c 61     in <code cla
1de0: 73 73 3d 22 66 75 6e 63 74 69 6f 6e 22 3e 66 75 ss="function">fu
1df0: 6c 6c 5f 64 69 73 70 61 74 63 68 5f 72 65 71 75 ll_dispatch_requ
1e00: 65 73 74 3c 2f 63 6f 64 65 3e 3c 2f 68 34 3e 0a est</code></h4>.
1e10: 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 73 6f   <div class="so
1e20: 75 72 63 65 20 22 3e 3c 70 72 65 20 63 6c 61 73 urce "><pre clas
1e30: 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e s="line before">
1e40: 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 <span class="ws"
1e50: 3e 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 >            </s
1e60: 70 61 6e 3e 72 65 71 75 65 73 74 5f 73 74 61 72 pan>request_star
1e70: 74 65 64 2e 73 65 6e 64 28 73 65 6c 66 29 3c 2f ted.send(self)</
1e80: 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d pre>.<pre class=
1e90: 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 "line before"><s
1ea0: 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 pan class="ws"> 
1eb0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61            </spa
1ec0: 6e 3e 72 76 20 3d 20 73 65 6c 66 2e 70 72 65 70 n>rv = self.prep
1ed0: 72 6f 63 65 73 73 5f 72 65 71 75 65 73 74 28 29 rocess_request()
1ee0: 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 </pre>.<pre clas
1ef0: 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e s="line before">
1f00: 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 <span class="ws"
1f10: 3e 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 >            </s
1f20: 70 61 6e 3e 69 66 20 72 76 20 69 73 20 4e 6f 6e pan>if rv is Non
1f30: 65 3a 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c e:</pre>.<pre cl
1f40: 61 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 ass="line before
1f50: 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 "><span class="w
1f60: 73 22 3e 20 20 20 20 20 20 20 20 20 20 20 20 20 s">             
1f70: 20 20 20 3c 2f 73 70 61 6e 3e 72 76 20 3d 20 73    </span>rv = s
1f80: 65 6c 66 2e 64 69 73 70 61 74 63 68 5f 72 65 71 elf.dispatch_req
1f90: 75 65 73 74 28 29 3c 2f 70 72 65 3e 0a 3c 70 72 uest()</pre>.<pr
1fa0: 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 e class="line be
1fb0: 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 fore"><span clas
1fc0: 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c s="ws">        <
1fd0: 2f 73 70 61 6e 3e 65 78 63 65 70 74 20 45 78 63 /span>except Exc
1fe0: 65 70 74 69 6f 6e 20 61 73 20 65 3a 3c 2f 70 72 eption as e:</pr
1ff0: 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c e>.<pre class="l
2000: 69 6e 65 20 63 75 72 72 65 6e 74 22 3e 3c 73 70 ine current"><sp
2010: 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 an class="ws">  
2020: 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e           </span
2030: 3e 72 76 20 3d 20 73 65 6c 66 2e 68 61 6e 64 6c >rv = self.handl
2040: 65 5f 75 73 65 72 5f 65 78 63 65 70 74 69 6f 6e e_user_exception
2050: 28 65 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 (e)</pre>.<pre c
2060: 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 lass="line after
2070: 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 "><span class="w
2080: 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 61 s">        </spa
2090: 6e 3e 72 65 74 75 72 6e 20 73 65 6c 66 2e 66 69 n>return self.fi
20a0: 6e 61 6c 69 7a 65 5f 72 65 71 75 65 73 74 28 72 nalize_request(r
20b0: 76 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c v)</pre>.<pre cl
20c0: 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 ass="line after"
20d0: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
20e0: 22 3e 3c 2f 73 70 61 6e 3e 20 3c 2f 70 72 65 3e "></span> </pre>
20f0: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
2100: 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 e after"><span c
2110: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 3c 2f lass="ws">    </
2120: 73 70 61 6e 3e 64 65 66 20 66 69 6e 61 6c 69 7a span>def finaliz
2130: 65 5f 72 65 71 75 65 73 74 28 73 65 6c 66 2c 20 e_request(self, 
2140: 72 76 2c 20 66 72 6f 6d 5f 65 72 72 6f 72 5f 68 rv, from_error_h
2150: 61 6e 64 6c 65 72 3d 46 61 6c 73 65 29 3a 3c 2f andler=False):</
2160: 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d pre>.<pre class=
2170: 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 "line after"><sp
2180: 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 an class="ws">  
2190: 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 26 71 75       </span>&qu
21a0: 6f 74 3b 26 71 75 6f 74 3b 26 71 75 6f 74 3b 47 ot;&quot;&quot;G
21b0: 69 76 65 6e 20 74 68 65 20 72 65 74 75 72 6e 20 iven the return 
21c0: 76 61 6c 75 65 20 66 72 6f 6d 20 61 20 76 69 65 value from a vie
21d0: 77 20 66 75 6e 63 74 69 6f 6e 20 74 68 69 73 20 w function this 
21e0: 66 69 6e 61 6c 69 7a 65 73 3c 2f 70 72 65 3e 0a finalizes</pre>.
21f0: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
2200: 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c  after"><span cl
2210: 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 ass="ws">       
2220: 20 3c 2f 73 70 61 6e 3e 74 68 65 20 72 65 71 75  </span>the requ
2230: 65 73 74 20 62 79 20 63 6f 6e 76 65 72 74 69 6e est by convertin
2240: 67 20 69 74 20 69 6e 74 6f 20 61 20 72 65 73 70 g it into a resp
2250: 6f 6e 73 65 20 61 6e 64 20 69 6e 76 6f 6b 69 6e onse and invokin
2260: 67 20 74 68 65 3c 2f 70 72 65 3e 3c 2f 64 69 76 g the</pre></div
2270: 3e 0a 3c 2f 64 69 76 3e 0a 0a 3c 6c 69 3e 3c 64 >.</div>..<li><d
2280: 69 76 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 22 iv class="frame"
2290: 20 69 64 3d 22 66 72 61 6d 65 2d 34 35 32 38 31  id="frame-45281
22a0: 38 34 33 33 36 22 3e 0a 20 20 3c 68 34 3e 46 69 84336">.  <h4>Fi
22b0: 6c 65 20 3c 63 69 74 65 20 63 6c 61 73 73 3d 22 le <cite class="
22c0: 66 69 6c 65 6e 61 6d 65 22 3e 22 2f 75 73 72 2f filename">"/usr/
22d0: 6c 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e local/lib/python
22e0: 33 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 3.9/site-package
22f0: 73 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 79 22 3c s/flask/app.py"<
2300: 2f 63 69 74 65 3e 2c 0a 20 20 20 20 20 20 6c 69 /cite>,.      li
2310: 6e 65 20 3c 65 6d 20 63 6c 61 73 73 3d 22 6c 69 ne <em class="li
2320: 6e 65 22 3e 31 38 32 31 3c 2f 65 6d 3e 2c 0a 20 ne">1821</em>,. 
2330: 20 20 20 20 20 69 6e 20 3c 63 6f 64 65 20 63 6c      in <code cl
2340: 61 73 73 3d 22 66 75 6e 63 74 69 6f 6e 22 3e 68 ass="function">h
2350: 61 6e 64 6c 65 5f 75 73 65 72 5f 65 78 63 65 70 andle_user_excep
2360: 74 69 6f 6e 3c 2f 63 6f 64 65 3e 3c 2f 68 34 3e tion</code></h4>
2370: 0a 20 20 3c 64 69 76 20 63 6c 61 73 73 3d 22 73 .  <div class="s
2380: 6f 75 72 63 65 20 22 3e 3c 70 72 65 20 63 6c 61 ource "><pre cla
2390: 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 ss="line before"
23a0: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
23b0: 22 3e 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f ">            </
23c0: 73 70 61 6e 3e 72 65 74 75 72 6e 20 73 65 6c 66 span>return self
23d0: 2e 68 61 6e 64 6c 65 5f 68 74 74 70 5f 65 78 63 .handle_http_exc
23e0: 65 70 74 69 6f 6e 28 65 29 3c 2f 70 72 65 3e 0a eption(e)</pre>.
23f0: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
2400: 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63  before"><span c
2410: 6c 61 73 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e lass="ws"></span
2420: 3e 20 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c > </pre>.<pre cl
2430: 61 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 ass="line before
2440: 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 "><span class="w
2450: 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 61 s">        </spa
2460: 6e 3e 68 61 6e 64 6c 65 72 20 3d 20 73 65 6c 66 n>handler = self
2470: 2e 5f 66 69 6e 64 5f 65 72 72 6f 72 5f 68 61 6e ._find_error_han
2480: 64 6c 65 72 28 65 29 3c 2f 70 72 65 3e 0a 3c 70 dler(e)</pre>.<p
2490: 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 re class="line b
24a0: 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 efore"><span cla
24b0: 73 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e 3e 20 ss="ws"></span> 
24c0: 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 </pre>.<pre clas
24d0: 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e s="line before">
24e0: 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 <span class="ws"
24f0: 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e >        </span>
2500: 69 66 20 68 61 6e 64 6c 65 72 20 69 73 20 4e 6f if handler is No
2510: 6e 65 3a 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 ne:</pre>.<pre c
2520: 6c 61 73 73 3d 22 6c 69 6e 65 20 63 75 72 72 65 lass="line curre
2530: 6e 74 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d nt"><span class=
2540: 22 77 73 22 3e 20 20 20 20 20 20 20 20 20 20 20 "ws">           
2550: 20 3c 2f 73 70 61 6e 3e 72 65 72 61 69 73 65 28  </span>reraise(
2560: 65 78 63 5f 74 79 70 65 2c 20 65 78 63 5f 76 61 exc_type, exc_va
2570: 6c 75 65 2c 20 74 62 29 3c 2f 70 72 65 3e 0a 3c lue, tb)</pre>.<
2580: 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 pre class="line 
2590: 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 after"><span cla
25a0: 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 ss="ws">        
25b0: 3c 2f 73 70 61 6e 3e 72 65 74 75 72 6e 20 68 61 </span>return ha
25c0: 6e 64 6c 65 72 28 65 29 3c 2f 70 72 65 3e 0a 3c ndler(e)</pre>.<
25d0: 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 pre class="line 
25e0: 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 after"><span cla
25f0: 73 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e 3e 20 ss="ws"></span> 
2600: 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 </pre>.<pre clas
2610: 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c s="line after"><
2620: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
2630: 20 20 20 20 3c 2f 73 70 61 6e 3e 64 65 66 20 68     </span>def h
2640: 61 6e 64 6c 65 5f 65 78 63 65 70 74 69 6f 6e 28 andle_exception(
2650: 73 65 6c 66 2c 20 65 29 3a 3c 2f 70 72 65 3e 0a self, e):</pre>.
2660: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
2670: 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c  after"><span cl
2680: 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 ass="ws">       
2690: 20 3c 2f 73 70 61 6e 3e 26 71 75 6f 74 3b 26 71  </span>&quot;&q
26a0: 75 6f 74 3b 26 71 75 6f 74 3b 48 61 6e 64 6c 65 uot;&quot;Handle
26b0: 20 61 6e 20 65 78 63 65 70 74 69 6f 6e 20 74 68  an exception th
26c0: 61 74 20 64 69 64 20 6e 6f 74 20 68 61 76 65 20 at did not have 
26d0: 61 6e 20 65 72 72 6f 72 20 68 61 6e 64 6c 65 72 an error handler
26e0: 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 </pre>.<pre clas
26f0: 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c s="line after"><
2700: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
2710: 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 61         </span>a
2720: 73 73 6f 63 69 61 74 65 64 20 77 69 74 68 20 69 ssociated with i
2730: 74 2c 20 6f 72 20 74 68 61 74 20 77 61 73 20 72 t, or that was r
2740: 61 69 73 65 64 20 66 72 6f 6d 20 61 6e 20 65 72 aised from an er
2750: 72 6f 72 20 68 61 6e 64 6c 65 72 2e 3c 2f 70 72 ror handler.</pr
2760: 65 3e 3c 2f 64 69 76 3e 0a 3c 2f 64 69 76 3e 0a e></div>.</div>.
2770: 0a 3c 6c 69 3e 3c 64 69 76 20 63 6c 61 73 73 3d .<li><div class=
2780: 22 66 72 61 6d 65 22 20 69 64 3d 22 66 72 61 6d "frame" id="fram
2790: 65 2d 34 35 32 38 31 38 35 32 34 38 22 3e 0a 20 e-4528185248">. 
27a0: 20 3c 68 34 3e 46 69 6c 65 20 3c 63 69 74 65 20  <h4>File <cite 
27b0: 63 6c 61 73 73 3d 22 66 69 6c 65 6e 61 6d 65 22 class="filename"
27c0: 3e 22 2f 75 73 72 2f 6c 6f 63 61 6c 2f 6c 69 62 >"/usr/local/lib
27d0: 2f 70 79 74 68 6f 6e 33 2e 39 2f 73 69 74 65 2d /python3.9/site-
27e0: 70 61 63 6b 61 67 65 73 2f 66 6c 61 73 6b 2f 5f packages/flask/_
27f0: 63 6f 6d 70 61 74 2e 70 79 22 3c 2f 63 69 74 65 compat.py"</cite
2800: 3e 2c 0a 20 20 20 20 20 20 6c 69 6e 65 20 3c 65 >,.      line <e
2810: 6d 20 63 6c 61 73 73 3d 22 6c 69 6e 65 22 3e 33 m class="line">3
2820: 39 3c 2f 65 6d 3e 2c 0a 20 20 20 20 20 20 69 6e 9</em>,.      in
2830: 20 3c 63 6f 64 65 20 63 6c 61 73 73 3d 22 66 75  <code class="fu
2840: 6e 63 74 69 6f 6e 22 3e 72 65 72 61 69 73 65 3c nction">reraise<
2850: 2f 63 6f 64 65 3e 3c 2f 68 34 3e 0a 20 20 3c 64 /code></h4>.  <d
2860: 69 76 20 63 6c 61 73 73 3d 22 73 6f 75 72 63 65 iv class="source
2870: 20 22 3e 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c  "><pre class="l
2880: 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 ine before"><spa
2890: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
28a0: 20 3c 2f 73 70 61 6e 3e 69 6d 70 6f 72 74 20 63  </span>import c
28b0: 6f 6c 6c 65 63 74 69 6f 6e 73 2e 61 62 63 20 61 ollections.abc a
28c0: 73 20 63 6f 6c 6c 65 63 74 69 6f 6e 73 5f 61 62 s collections_ab
28d0: 63 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 c</pre>.<pre cla
28e0: 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 ss="line before"
28f0: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
2900: 22 3e 3c 2f 73 70 61 6e 3e 20 3c 2f 70 72 65 3e "></span> </pre>
2910: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
2920: 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 e before"><span 
2930: 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 3c class="ws">    <
2940: 2f 73 70 61 6e 3e 64 65 66 20 72 65 72 61 69 73 /span>def rerais
2950: 65 28 74 70 2c 20 76 61 6c 75 65 2c 20 74 62 3d e(tp, value, tb=
2960: 4e 6f 6e 65 29 3a 3c 2f 70 72 65 3e 0a 3c 70 72 None):</pre>.<pr
2970: 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 e class="line be
2980: 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 fore"><span clas
2990: 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c s="ws">        <
29a0: 2f 73 70 61 6e 3e 69 66 20 76 61 6c 75 65 2e 5f /span>if value._
29b0: 5f 74 72 61 63 65 62 61 63 6b 5f 5f 20 69 73 20 _traceback__ is 
29c0: 6e 6f 74 20 74 62 3a 3c 2f 70 72 65 3e 0a 3c 70 not tb:</pre>.<p
29d0: 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 re class="line b
29e0: 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 efore"><span cla
29f0: 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 ss="ws">        
2a00: 20 20 20 20 3c 2f 73 70 61 6e 3e 72 61 69 73 65     </span>raise
2a10: 20 76 61 6c 75 65 2e 77 69 74 68 5f 74 72 61 63  value.with_trac
2a20: 65 62 61 63 6b 28 74 62 29 3c 2f 70 72 65 3e 0a eback(tb)</pre>.
2a30: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
2a40: 20 63 75 72 72 65 6e 74 22 3e 3c 73 70 61 6e 20  current"><span 
2a50: 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 class="ws">     
2a60: 20 20 20 3c 2f 73 70 61 6e 3e 72 61 69 73 65 20    </span>raise 
2a70: 76 61 6c 75 65 3c 2f 70 72 65 3e 0a 3c 70 72 65 value</pre>.<pre
2a80: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74  class="line aft
2a90: 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d er"><span class=
2aa0: 22 77 73 22 3e 3c 2f 73 70 61 6e 3e 20 3c 2f 70 "ws"></span> </p
2ab0: 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 re>.<pre class="
2ac0: 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 61 line after"><spa
2ad0: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
2ae0: 20 3c 2f 73 70 61 6e 3e 69 6d 70 6c 65 6d 65 6e  </span>implemen
2af0: 74 73 5f 74 6f 5f 73 74 72 69 6e 67 20 3d 20 5f ts_to_string = _
2b00: 69 64 65 6e 74 69 74 79 3c 2f 70 72 65 3e 0a 3c identity</pre>.<
2b10: 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 pre class="line 
2b20: 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 after"><span cla
2b30: 73 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e 3e 20 ss="ws"></span> 
2b40: 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 </pre>.<pre clas
2b50: 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c s="line after"><
2b60: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
2b70: 3c 2f 73 70 61 6e 3e 65 6c 73 65 3a 3c 2f 70 72 </span>else:</pr
2b80: 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c e>.<pre class="l
2b90: 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e ine after"><span
2ba0: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
2bb0: 3c 2f 73 70 61 6e 3e 69 74 65 72 6b 65 79 73 20 </span>iterkeys 
2bc0: 3d 20 6c 61 6d 62 64 61 20 64 3a 20 64 2e 69 74 = lambda d: d.it
2bd0: 65 72 6b 65 79 73 28 29 3c 2f 70 72 65 3e 3c 2f erkeys()</pre></
2be0: 64 69 76 3e 0a 3c 2f 64 69 76 3e 0a 0a 3c 6c 69 div>.</div>..<li
2bf0: 3e 3c 64 69 76 20 63 6c 61 73 73 3d 22 66 72 61 ><div class="fra
2c00: 6d 65 22 20 69 64 3d 22 66 72 61 6d 65 2d 34 35 me" id="frame-45
2c10: 32 38 31 38 34 38 36 34 22 3e 0a 20 20 3c 68 34 28184864">.  <h4
2c20: 3e 46 69 6c 65 20 3c 63 69 74 65 20 63 6c 61 73 >File <cite clas
2c30: 73 3d 22 66 69 6c 65 6e 61 6d 65 22 3e 22 2f 75 s="filename">"/u
2c40: 73 72 2f 6c 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 sr/local/lib/pyt
2c50: 68 6f 6e 33 2e 39 2f 73 69 74 65 2d 70 61 63 6b hon3.9/site-pack
2c60: 61 67 65 73 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 ages/flask/app.p
2c70: 79 22 3c 2f 63 69 74 65 3e 2c 0a 20 20 20 20 20 y"</cite>,.     
2c80: 20 6c 69 6e 65 20 3c 65 6d 20 63 6c 61 73 73 3d  line <em class=
2c90: 22 6c 69 6e 65 22 3e 31 39 35 30 3c 2f 65 6d 3e "line">1950</em>
2ca0: 2c 0a 20 20 20 20 20 20 69 6e 20 3c 63 6f 64 65 ,.      in <code
2cb0: 20 63 6c 61 73 73 3d 22 66 75 6e 63 74 69 6f 6e  class="function
2cc0: 22 3e 66 75 6c 6c 5f 64 69 73 70 61 74 63 68 5f ">full_dispatch_
2cd0: 72 65 71 75 65 73 74 3c 2f 63 6f 64 65 3e 3c 2f request</code></
2ce0: 68 34 3e 0a 20 20 3c 64 69 76 20 63 6c 61 73 73 h4>.  <div class
2cf0: 3d 22 73 6f 75 72 63 65 20 22 3e 3c 70 72 65 20 ="source "><pre 
2d00: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f class="line befo
2d10: 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d re"><span class=
2d20: 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 "ws">        </s
2d30: 70 61 6e 3e 73 65 6c 66 2e 74 72 79 5f 74 72 69 pan>self.try_tri
2d40: 67 67 65 72 5f 62 65 66 6f 72 65 5f 66 69 72 73 gger_before_firs
2d50: 74 5f 72 65 71 75 65 73 74 5f 66 75 6e 63 74 69 t_request_functi
2d60: 6f 6e 73 28 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 ons()</pre>.<pre
2d70: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66  class="line bef
2d80: 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 ore"><span class
2d90: 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f ="ws">        </
2da0: 73 70 61 6e 3e 74 72 79 3a 3c 2f 70 72 65 3e 0a span>try:</pre>.
2db0: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
2dc0: 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63  before"><span c
2dd0: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 lass="ws">      
2de0: 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 72 65 71       </span>req
2df0: 75 65 73 74 5f 73 74 61 72 74 65 64 2e 73 65 6e uest_started.sen
2e00: 64 28 73 65 6c 66 29 3c 2f 70 72 65 3e 0a 3c 70 d(self)</pre>.<p
2e10: 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 re class="line b
2e20: 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 efore"><span cla
2e30: 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 ss="ws">        
2e40: 20 20 20 20 3c 2f 73 70 61 6e 3e 72 76 20 3d 20     </span>rv = 
2e50: 73 65 6c 66 2e 70 72 65 70 72 6f 63 65 73 73 5f self.preprocess_
2e60: 72 65 71 75 65 73 74 28 29 3c 2f 70 72 65 3e 0a request()</pre>.
2e70: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
2e80: 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63  before"><span c
2e90: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 lass="ws">      
2ea0: 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 69 66 20       </span>if 
2eb0: 72 76 20 69 73 20 4e 6f 6e 65 3a 3c 2f 70 72 65 rv is None:</pre
2ec0: 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 >.<pre class="li
2ed0: 6e 65 20 63 75 72 72 65 6e 74 22 3e 3c 73 70 61 ne current"><spa
2ee0: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
2ef0: 20 20 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73              </s
2f00: 70 61 6e 3e 72 76 20 3d 20 73 65 6c 66 2e 64 69 pan>rv = self.di
2f10: 73 70 61 74 63 68 5f 72 65 71 75 65 73 74 28 29 spatch_request()
2f20: 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 </pre>.<pre clas
2f30: 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c s="line after"><
2f40: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
2f50: 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 65         </span>e
2f60: 78 63 65 70 74 20 45 78 63 65 70 74 69 6f 6e 20 xcept Exception 
2f70: 61 73 20 65 3a 3c 2f 70 72 65 3e 0a 3c 70 72 65 as e:</pre>.<pre
2f80: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74  class="line aft
2f90: 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d er"><span class=
2fa0: 22 77 73 22 3e 20 20 20 20 20 20 20 20 20 20 20 "ws">           
2fb0: 20 3c 2f 73 70 61 6e 3e 72 76 20 3d 20 73 65 6c  </span>rv = sel
2fc0: 66 2e 68 61 6e 64 6c 65 5f 75 73 65 72 5f 65 78 f.handle_user_ex
2fd0: 63 65 70 74 69 6f 6e 28 65 29 3c 2f 70 72 65 3e ception(e)</pre>
2fe0: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
2ff0: 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 e after"><span c
3000: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 lass="ws">      
3010: 20 20 3c 2f 73 70 61 6e 3e 72 65 74 75 72 6e 20   </span>return 
3020: 73 65 6c 66 2e 66 69 6e 61 6c 69 7a 65 5f 72 65 self.finalize_re
3030: 71 75 65 73 74 28 72 76 29 3c 2f 70 72 65 3e 0a quest(rv)</pre>.
3040: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
3050: 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c  after"><span cl
3060: 61 73 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e 3e ass="ws"></span>
3070: 20 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61  </pre>.<pre cla
3080: 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e ss="line after">
3090: 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 <span class="ws"
30a0: 3e 20 20 20 20 3c 2f 73 70 61 6e 3e 64 65 66 20 >    </span>def 
30b0: 66 69 6e 61 6c 69 7a 65 5f 72 65 71 75 65 73 74 finalize_request
30c0: 28 73 65 6c 66 2c 20 72 76 2c 20 66 72 6f 6d 5f (self, rv, from_
30d0: 65 72 72 6f 72 5f 68 61 6e 64 6c 65 72 3d 46 61 error_handler=Fa
30e0: 6c 73 65 29 3a 3c 2f 70 72 65 3e 3c 2f 64 69 76 lse):</pre></div
30f0: 3e 0a 3c 2f 64 69 76 3e 0a 0a 3c 6c 69 3e 3c 64 >.</div>..<li><d
3100: 69 76 20 63 6c 61 73 73 3d 22 66 72 61 6d 65 22 iv class="frame"
3110: 20 69 64 3d 22 66 72 61 6d 65 2d 34 35 32 38 31  id="frame-45281
3120: 38 32 39 34 34 22 3e 0a 20 20 3c 68 34 3e 46 69 82944">.  <h4>Fi
3130: 6c 65 20 3c 63 69 74 65 20 63 6c 61 73 73 3d 22 le <cite class="
3140: 66 69 6c 65 6e 61 6d 65 22 3e 22 2f 75 73 72 2f filename">"/usr/
3150: 6c 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e local/lib/python
3160: 33 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 3.9/site-package
3170: 73 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 79 22 3c s/flask/app.py"<
3180: 2f 63 69 74 65 3e 2c 0a 20 20 20 20 20 20 6c 69 /cite>,.      li
3190: 6e 65 20 3c 65 6d 20 63 6c 61 73 73 3d 22 6c 69 ne <em class="li
31a0: 6e 65 22 3e 31 39 33 36 3c 2f 65 6d 3e 2c 0a 20 ne">1936</em>,. 
31b0: 20 20 20 20 20 69 6e 20 3c 63 6f 64 65 20 63 6c      in <code cl
31c0: 61 73 73 3d 22 66 75 6e 63 74 69 6f 6e 22 3e 64 ass="function">d
31d0: 69 73 70 61 74 63 68 5f 72 65 71 75 65 73 74 3c ispatch_request<
31e0: 2f 63 6f 64 65 3e 3c 2f 68 34 3e 0a 20 20 3c 64 /code></h4>.  <d
31f0: 69 76 20 63 6c 61 73 73 3d 22 73 6f 75 72 63 65 iv class="source
3200: 20 22 3e 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c  "><pre class="l
3210: 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 ine before"><spa
3220: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
3230: 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e          </span>
3240: 67 65 74 61 74 74 72 28 72 75 6c 65 2c 20 26 71 getattr(rule, &q
3250: 75 6f 74 3b 70 72 6f 76 69 64 65 5f 61 75 74 6f uot;provide_auto
3260: 6d 61 74 69 63 5f 6f 70 74 69 6f 6e 73 26 71 75 matic_options&qu
3270: 6f 74 3b 2c 20 46 61 6c 73 65 29 3c 2f 70 72 65 ot;, False)</pre
3280: 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 >.<pre class="li
3290: 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e ne before"><span
32a0: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
32b0: 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 61         </span>a
32c0: 6e 64 20 72 65 71 2e 6d 65 74 68 6f 64 20 3d 3d nd req.method ==
32d0: 20 26 71 75 6f 74 3b 4f 50 54 49 4f 4e 53 26 71  &quot;OPTIONS&q
32e0: 75 6f 74 3b 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 uot;</pre>.<pre 
32f0: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f class="line befo
3300: 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d re"><span class=
3310: 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 "ws">        </s
3320: 70 61 6e 3e 29 3a 3c 2f 70 72 65 3e 0a 3c 70 72 pan>):</pre>.<pr
3330: 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 e class="line be
3340: 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 fore"><span clas
3350: 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 20 s="ws">         
3360: 20 20 20 3c 2f 73 70 61 6e 3e 72 65 74 75 72 6e    </span>return
3370: 20 73 65 6c 66 2e 6d 61 6b 65 5f 64 65 66 61 75  self.make_defau
3380: 6c 74 5f 6f 70 74 69 6f 6e 73 5f 72 65 73 70 6f lt_options_respo
3390: 6e 73 65 28 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 nse()</pre>.<pre
33a0: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66  class="line bef
33b0: 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 ore"><span class
33c0: 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f ="ws">        </
33d0: 73 70 61 6e 3e 23 20 6f 74 68 65 72 77 69 73 65 span># otherwise
33e0: 20 64 69 73 70 61 74 63 68 20 74 6f 20 74 68 65  dispatch to the
33f0: 20 68 61 6e 64 6c 65 72 20 66 6f 72 20 74 68 61  handler for tha
3400: 74 20 65 6e 64 70 6f 69 6e 74 3c 2f 70 72 65 3e t endpoint</pre>
3410: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
3420: 65 20 63 75 72 72 65 6e 74 22 3e 3c 73 70 61 6e e current"><span
3430: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
3440: 20 20 20 20 3c 2f 73 70 61 6e 3e 72 65 74 75 72     </span>retur
3450: 6e 20 73 65 6c 66 2e 76 69 65 77 5f 66 75 6e 63 n self.view_func
3460: 74 69 6f 6e 73 5b 72 75 6c 65 2e 65 6e 64 70 6f tions[rule.endpo
3470: 69 6e 74 5d 28 2a 2a 72 65 71 2e 76 69 65 77 5f int](**req.view_
3480: 61 72 67 73 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 args)</pre>.<pre
3490: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74  class="line aft
34a0: 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d er"><span class=
34b0: 22 77 73 22 3e 3c 2f 73 70 61 6e 3e 20 3c 2f 70 "ws"></span> </p
34c0: 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 re>.<pre class="
34d0: 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 61 line after"><spa
34e0: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
34f0: 20 3c 2f 73 70 61 6e 3e 64 65 66 20 66 75 6c 6c  </span>def full
3500: 5f 64 69 73 70 61 74 63 68 5f 72 65 71 75 65 73 _dispatch_reques
3510: 74 28 73 65 6c 66 29 3a 3c 2f 70 72 65 3e 0a 3c t(self):</pre>.<
3520: 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 pre class="line 
3530: 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 after"><span cla
3540: 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 ss="ws">        
3550: 3c 2f 73 70 61 6e 3e 26 71 75 6f 74 3b 26 71 75 </span>&quot;&qu
3560: 6f 74 3b 26 71 75 6f 74 3b 44 69 73 70 61 74 63 ot;&quot;Dispatc
3570: 68 65 73 20 74 68 65 20 72 65 71 75 65 73 74 20 hes the request 
3580: 61 6e 64 20 6f 6e 20 74 6f 70 20 6f 66 20 74 68 and on top of th
3590: 61 74 20 70 65 72 66 6f 72 6d 73 20 72 65 71 75 at performs requ
35a0: 65 73 74 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 est</pre>.<pre c
35b0: 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 lass="line after
35c0: 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 "><span class="w
35d0: 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 61 s">        </spa
35e0: 6e 3e 70 72 65 20 61 6e 64 20 70 6f 73 74 70 72 n>pre and postpr
35f0: 6f 63 65 73 73 69 6e 67 20 61 73 20 77 65 6c 6c ocessing as well
3600: 20 61 73 20 48 54 54 50 20 65 78 63 65 70 74 69  as HTTP excepti
3610: 6f 6e 20 63 61 74 63 68 69 6e 67 20 61 6e 64 3c on catching and<
3620: 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 /pre>.<pre class
3630: 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 ="line after"><s
3640: 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 pan class="ws"> 
3650: 20 20 20 20 20 20 20 3c 2f 73 70 61 6e 3e 65 72        </span>er
3660: 72 6f 72 20 68 61 6e 64 6c 69 6e 67 2e 3c 2f 70 ror handling.</p
3670: 72 65 3e 3c 2f 64 69 76 3e 0a 3c 2f 64 69 76 3e re></div>.</div>
3680: 0a 0a 3c 6c 69 3e 3c 64 69 76 20 63 6c 61 73 73 ..<li><div class
3690: 3d 22 66 72 61 6d 65 22 20 69 64 3d 22 66 72 61 ="frame" id="fra
36a0: 6d 65 2d 34 35 32 38 31 38 33 30 38 38 22 3e 0a me-4528183088">.
36b0: 20 20 3c 68 34 3e 46 69 6c 65 20 3c 63 69 74 65   <h4>File <cite
36c0: 20 63 6c 61 73 73 3d 22 66 69 6c 65 6e 61 6d 65  class="filename
36d0: 22 3e 22 2f 55 73 65 72 73 2f 73 6d 63 6d 69 6c ">"/Users/smcmil
36e0: 6c 61 6e 2f 6b 75 2d 73 6f 6c 61 72 2d 63 61 72 lan/ku-solar-car
36f0: 2f 54 65 6c 65 6d 65 74 72 79 53 65 72 76 65 72 /TelemetryServer
3700: 2f 6d 61 69 6e 2e 70 79 22 3c 2f 63 69 74 65 3e /main.py"</cite>
3710: 2c 0a 20 20 20 20 20 20 6c 69 6e 65 20 3c 65 6d ,.      line <em
3720: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 22 3e 39 38  class="line">98
3730: 3c 2f 65 6d 3e 2c 0a 20 20 20 20 20 20 69 6e 20 </em>,.      in 
3740: 3c 63 6f 64 65 20 63 6c 61 73 73 3d 22 66 75 6e <code class="fun
3750: 63 74 69 6f 6e 22 3e 66 72 6f 6d 43 61 72 3c 2f ction">fromCar</
3760: 63 6f 64 65 3e 3c 2f 68 34 3e 0a 20 20 3c 64 69 code></h4>.  <di
3770: 76 20 63 6c 61 73 73 3d 22 73 6f 75 72 63 65 20 v class="source 
3780: 22 3e 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 "><pre class="li
3790: 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e ne before"><span
37a0: 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20  class="ws">    
37b0: 3c 2f 73 70 61 6e 3e 67 6c 6f 62 61 6c 20 63 6f </span>global co
37c0: 75 6e 74 64 6f 77 6e 54 6f 42 75 66 66 65 72 43 untdownToBufferC
37d0: 6c 65 61 72 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 lear</pre>.<pre 
37e0: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f class="line befo
37f0: 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d re"><span class=
3800: 22 77 73 22 3e 20 20 20 20 3c 2f 73 70 61 6e 3e "ws">    </span>
3810: 69 66 20 63 6f 75 6e 74 64 6f 77 6e 54 6f 42 75 if countdownToBu
3820: 66 66 65 72 43 6c 65 61 72 2e 69 73 5f 61 6c 69 fferClear.is_ali
3830: 76 65 28 29 3a 3c 2f 70 72 65 3e 0a 3c 70 72 65 ve():</pre>.<pre
3840: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66  class="line bef
3850: 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 ore"><span class
3860: 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f ="ws">        </
3870: 73 70 61 6e 3e 63 6f 75 6e 74 64 6f 77 6e 54 6f span>countdownTo
3880: 42 75 66 66 65 72 43 6c 65 61 72 2e 63 61 6e 63 BufferClear.canc
3890: 65 6c 28 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 el()</pre>.<pre 
38a0: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66 6f class="line befo
38b0: 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d re"><span class=
38c0: 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 "ws">        </s
38d0: 70 61 6e 3e 63 6f 75 6e 74 64 6f 77 6e 54 6f 42 pan>countdownToB
38e0: 75 66 66 65 72 43 6c 65 61 72 20 3d 20 54 69 6d ufferClear = Tim
38f0: 65 72 28 36 30 2e 30 2c 20 77 72 69 74 65 54 6f er(60.0, writeTo
3900: 46 69 72 65 42 61 73 65 29 3c 2f 70 72 65 3e 0a FireBase)</pre>.
3910: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
3920: 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63  before"><span c
3930: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 3c 2f lass="ws">    </
3940: 73 70 61 6e 3e 63 6f 75 6e 74 64 6f 77 6e 54 6f span>countdownTo
3950: 42 75 66 66 65 72 43 6c 65 61 72 2e 73 74 61 72 BufferClear.star
3960: 74 28 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 t()</pre>.<pre c
3970: 6c 61 73 73 3d 22 6c 69 6e 65 20 63 75 72 72 65 lass="line curre
3980: 6e 74 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d nt"><span class=
3990: 22 77 73 22 3e 20 20 20 20 3c 2f 73 70 61 6e 3e "ws">    </span>
39a0: 61 75 74 68 20 3d 20 72 65 71 75 65 73 74 2e 68 auth = request.h
39b0: 65 61 64 65 72 73 5b 27 41 75 74 68 65 6e 74 69 eaders['Authenti
39c0: 63 61 74 69 6f 6e 27 5d 3c 2f 70 72 65 3e 0a 3c cation']</pre>.<
39d0: 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 pre class="line 
39e0: 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 after"><span cla
39f0: 73 73 3d 22 77 73 22 3e 20 20 20 20 3c 2f 73 70 ss="ws">    </sp
3a00: 61 6e 3e 69 66 20 61 75 74 68 20 21 3d 20 68 65 an>if auth != he
3a10: 61 64 65 72 4b 65 79 5b 26 71 75 6f 74 3b 41 75 aderKey[&quot;Au
3a20: 74 68 65 6e 74 69 63 61 74 69 6f 6e 26 71 75 6f thentication&quo
3a30: 74 3b 5d 3a 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 t;]:</pre>.<pre 
3a40: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 class="line afte
3a50: 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 r"><span class="
3a60: 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 ws">        </sp
3a70: 61 6e 3e 72 65 74 75 72 6e 20 66 26 71 75 6f 74 an>return f&quot
3a80: 3b 41 6e 20 45 72 72 6f 72 20 4f 63 63 75 72 65 ;An Error Occure
3a90: 64 3a 20 41 75 74 68 65 6e 74 69 63 61 74 69 6f d: Authenticatio
3aa0: 6e 20 46 61 69 6c 65 64 26 71 75 6f 74 3b 2c 20 n Failed&quot;, 
3ab0: 34 30 31 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 401</pre>.<pre c
3ac0: 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 lass="line after
3ad0: 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 "><span class="w
3ae0: 73 22 3e 20 20 20 20 3c 2f 73 70 61 6e 3e 6e 6f s">    </span>no
3af0: 77 20 3d 20 64 61 74 65 74 69 6d 65 2e 6e 6f 77 w = datetime.now
3b00: 28 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c ()</pre>.<pre cl
3b10: 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 ass="line after"
3b20: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
3b30: 22 3e 20 20 20 20 3c 2f 73 70 61 6e 3e 72 65 71 ">    </span>req
3b40: 5f 62 6f 64 79 20 3d 20 72 65 71 75 65 73 74 2e _body = request.
3b50: 67 65 74 5f 6a 73 6f 6e 28 29 3c 2f 70 72 65 3e get_json()</pre>
3b60: 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e .<pre class="lin
3b70: 65 20 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 e after"><span c
3b80: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 3c 2f lass="ws">    </
3b90: 73 70 61 6e 3e 6e 6f 77 49 6e 53 65 63 6f 6e 64 span>nowInSecond
3ba0: 73 20 3d 20 72 6f 75 6e 64 28 28 6e 6f 77 20 2d s = round((now -
3bb0: 20 6e 6f 77 2e 72 65 70 6c 61 63 65 28 68 6f 75  now.replace(hou
3bc0: 72 3d 30 2c 20 6d 69 6e 75 74 65 3d 30 2c 20 73 r=0, minute=0, s
3bd0: 65 63 6f 6e 64 3d 30 2c 20 6d 69 63 72 6f 73 65 econd=0, microse
3be0: 63 6f 6e 64 3d 30 29 29 2e 74 6f 74 61 6c 5f 73 cond=0)).total_s
3bf0: 65 63 6f 6e 64 73 28 29 29 3c 2f 70 72 65 3e 3c econds())</pre><
3c00: 2f 64 69 76 3e 0a 3c 2f 64 69 76 3e 0a 0a 3c 6c /div>.</div>..<l
3c10: 69 3e 3c 64 69 76 20 63 6c 61 73 73 3d 22 66 72 i><div class="fr
3c20: 61 6d 65 22 20 69 64 3d 22 66 72 61 6d 65 2d 34 ame" id="frame-4
3c30: 35 32 38 31 38 34 38 31 36 22 3e 0a 20 20 3c 68 528184816">.  <h
3c40: 34 3e 46 69 6c 65 20 3c 63 69 74 65 20 63 6c 61 4>File <cite cla
3c50: 73 73 3d 22 66 69 6c 65 6e 61 6d 65 22 3e 22 2f ss="filename">"/
3c60: 75 73 72 2f 6c 6f 63 61 6c 2f 6c 69 62 2f 70 79 usr/local/lib/py
3c70: 74 68 6f 6e 33 2e 39 2f 73 69 74 65 2d 70 61 63 thon3.9/site-pac
3c80: 6b 61 67 65 73 2f 77 65 72 6b 7a 65 75 67 2f 64 kages/werkzeug/d
3c90: 61 74 61 73 74 72 75 63 74 75 72 65 73 2e 70 79 atastructures.py
3ca0: 22 3c 2f 63 69 74 65 3e 2c 0a 20 20 20 20 20 20 "</cite>,.      
3cb0: 6c 69 6e 65 20 3c 65 6d 20 63 6c 61 73 73 3d 22 line <em class="
3cc0: 6c 69 6e 65 22 3e 31 34 36 33 3c 2f 65 6d 3e 2c line">1463</em>,
3cd0: 0a 20 20 20 20 20 20 69 6e 20 3c 63 6f 64 65 20 .      in <code 
3ce0: 63 6c 61 73 73 3d 22 66 75 6e 63 74 69 6f 6e 22 class="function"
3cf0: 3e 5f 5f 67 65 74 69 74 65 6d 5f 5f 3c 2f 63 6f >__getitem__</co
3d00: 64 65 3e 3c 2f 68 34 3e 0a 20 20 3c 64 69 76 20 de></h4>.  <div 
3d10: 63 6c 61 73 73 3d 22 73 6f 75 72 63 65 20 22 3e class="source ">
3d20: 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 <pre class="line
3d30: 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 6e 20 63  before"><span c
3d40: 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 20 20 20 lass="ws">      
3d50: 20 20 3c 2f 73 70 61 6e 3e 69 66 20 6e 6f 74 20   </span>if not 
3d60: 69 73 69 6e 73 74 61 6e 63 65 28 6b 65 79 2c 20 isinstance(key, 
3d70: 73 74 72 69 6e 67 5f 74 79 70 65 73 29 3a 3c 2f string_types):</
3d80: 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d pre>.<pre class=
3d90: 22 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 "line before"><s
3da0: 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 pan class="ws"> 
3db0: 20 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61            </spa
3dc0: 6e 3e 72 61 69 73 65 20 4b 65 79 45 72 72 6f 72 n>raise KeyError
3dd0: 28 6b 65 79 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 (key)</pre>.<pre
3de0: 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 62 65 66  class="line bef
3df0: 6f 72 65 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 ore"><span class
3e00: 3d 22 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f ="ws">        </
3e10: 73 70 61 6e 3e 6b 65 79 20 3d 20 6b 65 79 2e 75 span>key = key.u
3e20: 70 70 65 72 28 29 2e 72 65 70 6c 61 63 65 28 26 pper().replace(&
3e30: 71 75 6f 74 3b 2d 26 71 75 6f 74 3b 2c 20 26 71 quot;-&quot;, &q
3e40: 75 6f 74 3b 5f 26 71 75 6f 74 3b 29 3c 2f 70 72 uot;_&quot;)</pr
3e50: 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 6c e>.<pre class="l
3e60: 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 61 ine before"><spa
3e70: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
3e80: 20 20 20 20 20 3c 2f 73 70 61 6e 3e 69 66 20 6b      </span>if k
3e90: 65 79 20 69 6e 20 28 26 71 75 6f 74 3b 43 4f 4e ey in (&quot;CON
3ea0: 54 45 4e 54 5f 54 59 50 45 26 71 75 6f 74 3b 2c TENT_TYPE&quot;,
3eb0: 20 26 71 75 6f 74 3b 43 4f 4e 54 45 4e 54 5f 4c  &quot;CONTENT_L
3ec0: 45 4e 47 54 48 26 71 75 6f 74 3b 29 3a 3c 2f 70 ENGTH&quot;):</p
3ed0: 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 re>.<pre class="
3ee0: 6c 69 6e 65 20 62 65 66 6f 72 65 22 3e 3c 73 70 line before"><sp
3ef0: 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 an class="ws">  
3f00: 20 20 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e           </span
3f10: 3e 72 65 74 75 72 6e 20 5f 75 6e 69 63 6f 64 69 >return _unicodi
3f20: 66 79 5f 68 65 61 64 65 72 5f 76 61 6c 75 65 28 fy_header_value(
3f30: 73 65 6c 66 2e 65 6e 76 69 72 6f 6e 5b 6b 65 79 self.environ[key
3f40: 5d 29 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c ])</pre>.<pre cl
3f50: 61 73 73 3d 22 6c 69 6e 65 20 63 75 72 72 65 6e ass="line curren
3f60: 74 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 t"><span class="
3f70: 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 ws">        </sp
3f80: 61 6e 3e 72 65 74 75 72 6e 20 5f 75 6e 69 63 6f an>return _unico
3f90: 64 69 66 79 5f 68 65 61 64 65 72 5f 76 61 6c 75 dify_header_valu
3fa0: 65 28 73 65 6c 66 2e 65 6e 76 69 72 6f 6e 5b 26 e(self.environ[&
3fb0: 71 75 6f 74 3b 48 54 54 50 5f 26 71 75 6f 74 3b quot;HTTP_&quot;
3fc0: 20 2b 20 6b 65 79 5d 29 3c 2f 70 72 65 3e 0a 3c  + key])</pre>.<
3fd0: 70 72 65 20 63 6c 61 73 73 3d 22 6c 69 6e 65 20 pre class="line 
3fe0: 61 66 74 65 72 22 3e 3c 73 70 61 6e 20 63 6c 61 after"><span cla
3ff0: 73 73 3d 22 77 73 22 3e 3c 2f 73 70 61 6e 3e 20 ss="ws"></span> 
4000: 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 </pre>.<pre clas
4010: 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c s="line after"><
4020: 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e span class="ws">
4030: 20 20 20 20 3c 2f 73 70 61 6e 3e 64 65 66 20 5f     </span>def _
4040: 5f 6c 65 6e 5f 5f 28 73 65 6c 66 29 3a 3c 2f 70 _len__(self):</p
4050: 72 65 3e 0a 3c 70 72 65 20 63 6c 61 73 73 3d 22 re>.<pre class="
4060: 6c 69 6e 65 20 61 66 74 65 72 22 3e 3c 73 70 61 line after"><spa
4070: 6e 20 63 6c 61 73 73 3d 22 77 73 22 3e 20 20 20 n class="ws">   
4080: 20 20 20 20 20 3c 2f 73 70 61 6e 3e 23 20 74 68      </span># th
4090: 65 20 69 74 65 72 20 69 73 20 6e 65 63 65 73 73 e iter is necess
40a0: 61 72 79 20 62 65 63 61 75 73 65 20 6f 74 68 65 ary because othe
40b0: 72 77 69 73 65 20 6c 69 73 74 20 63 61 6c 6c 73 rwise list calls
40c0: 20 6f 75 72 3c 2f 70 72 65 3e 0a 3c 70 72 65 20  our</pre>.<pre 
40d0: 63 6c 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 class="line afte
40e0: 72 22 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 r"><span class="
40f0: 77 73 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 ws">        </sp
4100: 61 6e 3e 23 20 6c 65 6e 20 77 68 69 63 68 20 77 an># len which w
4110: 6f 75 6c 64 20 63 61 6c 6c 20 6c 69 73 74 20 61 ould call list a
4120: 67 61 69 6e 20 61 6e 64 20 73 6f 20 66 6f 72 74 gain and so fort
4130: 68 2e 3c 2f 70 72 65 3e 0a 3c 70 72 65 20 63 6c h.</pre>.<pre cl
4140: 61 73 73 3d 22 6c 69 6e 65 20 61 66 74 65 72 22 ass="line after"
4150: 3e 3c 73 70 61 6e 20 63 6c 61 73 73 3d 22 77 73 ><span class="ws
4160: 22 3e 20 20 20 20 20 20 20 20 3c 2f 73 70 61 6e ">        </span
4170: 3e 72 65 74 75 72 6e 20 6c 65 6e 28 6c 69 73 74 >return len(list
4180: 28 69 74 65 72 28 73 65 6c 66 29 29 29 3c 2f 70 (iter(self)))</p
4190: 72 65 3e 3c 2f 64 69 76 3e 0a 3c 2f 64 69 76 3e re></div>.</div>
41a0: 0a 3c 2f 75 6c 3e 0a 20 20 3c 62 6c 6f 63 6b 71 .</ul>.  <blockq
41b0: 75 6f 74 65 3e 4b 65 79 45 72 72 6f 72 3a 20 27 uote>KeyError: '
41c0: 48 54 54 50 5f 41 55 54 48 45 4e 54 49 43 41 54 HTTP_AUTHENTICAT
41d0: 49 4f 4e 27 3c 2f 62 6c 6f 63 6b 71 75 6f 74 65 ION'</blockquote
41e0: 3e 0a 3c 2f 64 69 76 3e 0a 0a 3c 64 69 76 20 63 >.</div>..<div c
41f0: 6c 61 73 73 3d 22 70 6c 61 69 6e 22 3e 0a 20 20 lass="plain">.  
4200: 3c 66 6f 72 6d 20 61 63 74 69 6f 6e 3d 22 2f 3f <form action="/?
4210: 5f 5f 64 65 62 75 67 67 65 72 5f 5f 3d 79 65 73 __debugger__=yes
4220: 26 61 6d 70 3b 63 6d 64 3d 70 61 73 74 65 22 20 &amp;cmd=paste" 
4230: 6d 65 74 68 6f 64 3d 22 70 6f 73 74 22 3e 0a 20 method="post">. 
4240: 20 20 20 3c 70 3e 0a 20 20 20 20 20 20 3c 69 6e    <p>.      <in
4250: 70 75 74 20 74 79 70 65 3d 22 68 69 64 64 65 6e put type="hidden
4260: 22 20 6e 61 6d 65 3d 22 6c 61 6e 67 75 61 67 65 " name="language
4270: 22 20 76 61 6c 75 65 3d 22 70 79 74 62 22 3e 0a " value="pytb">.
4280: 20 20 20 20 20 20 54 68 69 73 20 69 73 20 74 68       This is th
4290: 65 20 43 6f 70 79 2f 50 61 73 74 65 20 66 72 69 e Copy/Paste fri
42a0: 65 6e 64 6c 79 20 76 65 72 73 69 6f 6e 20 6f 66 endly version of
42b0: 20 74 68 65 20 74 72 61 63 65 62 61 63 6b 2e 20  the traceback. 
42c0: 20 3c 73 70 61 6e 0a 20 20 20 20 20 20 63 6c 61  <span.      cla
42d0: 73 73 3d 22 70 61 73 74 65 6d 65 73 73 61 67 65 ss="pastemessage
42e0: 22 3e 59 6f 75 20 63 61 6e 20 61 6c 73 6f 20 70 ">You can also p
42f0: 61 73 74 65 20 74 68 69 73 20 74 72 61 63 65 62 aste this traceb
4300: 61 63 6b 20 69 6e 74 6f 0a 20 20 20 20 20 20 61 ack into.      a
4310: 20 3c 61 20 68 72 65 66 3d 22 68 74 74 70 73 3a  <a href="https:
4320: 2f 2f 67 69 73 74 2e 67 69 74 68 75 62 2e 63 6f //gist.github.co
4330: 6d 2f 22 3e 67 69 73 74 3c 2f 61 3e 3a 0a 20 20 m/">gist</a>:.  
4340: 20 20 20 20 3c 69 6e 70 75 74 20 74 79 70 65 3d     <input type=
4350: 22 73 75 62 6d 69 74 22 20 76 61 6c 75 65 3d 22 "submit" value="
4360: 63 72 65 61 74 65 20 70 61 73 74 65 22 3e 3c 2f create paste"></
4370: 73 70 61 6e 3e 0a 20 20 20 20 3c 2f 70 3e 0a 20 span>.    </p>. 
4380: 20 20 20 3c 74 65 78 74 61 72 65 61 20 63 6f 6c    <textarea col
4390: 73 3d 22 35 30 22 20 72 6f 77 73 3d 22 31 30 22 s="50" rows="10"
43a0: 20 6e 61 6d 65 3d 22 63 6f 64 65 22 20 72 65 61  name="code" rea
43b0: 64 6f 6e 6c 79 3e 54 72 61 63 65 62 61 63 6b 20 donly>Traceback 
43c0: 28 6d 6f 73 74 20 72 65 63 65 6e 74 20 63 61 6c (most recent cal
43d0: 6c 20 6c 61 73 74 29 3a 0a 20 20 46 69 6c 65 20 l last):.  File 
43e0: 26 71 75 6f 74 3b 2f 75 73 72 2f 6c 6f 63 61 6c &quot;/usr/local
43f0: 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f 73 /lib/python3.9/s
4400: 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c 61 ite-packages/fla
4410: 73 6b 2f 61 70 70 2e 70 79 26 71 75 6f 74 3b 2c sk/app.py&quot;,
4420: 20 6c 69 6e 65 20 32 34 36 34 2c 20 69 6e 20 5f  line 2464, in _
4430: 5f 63 61 6c 6c 5f 5f 0a 20 20 20 20 72 65 74 75 _call__.    retu
4440: 72 6e 20 73 65 6c 66 2e 77 73 67 69 5f 61 70 70 rn self.wsgi_app
4450: 28 65 6e 76 69 72 6f 6e 2c 20 73 74 61 72 74 5f (environ, start_
4460: 72 65 73 70 6f 6e 73 65 29 0a 20 20 46 69 6c 65 response).  File
4470: 20 26 71 75 6f 74 3b 2f 75 73 72 2f 6c 6f 63 61  &quot;/usr/loca
4480: 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f l/lib/python3.9/
4490: 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c site-packages/fl
44a0: 61 73 6b 2f 61 70 70 2e 70 79 26 71 75 6f 74 3b ask/app.py&quot;
44b0: 2c 20 6c 69 6e 65 20 32 34 35 30 2c 20 69 6e 20 , line 2450, in 
44c0: 77 73 67 69 5f 61 70 70 0a 20 20 20 20 72 65 73 wsgi_app.    res
44d0: 70 6f 6e 73 65 20 3d 20 73 65 6c 66 2e 68 61 6e ponse = self.han
44e0: 64 6c 65 5f 65 78 63 65 70 74 69 6f 6e 28 65 29 dle_exception(e)
44f0: 0a 20 20 46 69 6c 65 20 26 71 75 6f 74 3b 2f 75 .  File &quot;/u
4500: 73 72 2f 6c 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 sr/local/lib/pyt
4510: 68 6f 6e 33 2e 39 2f 73 69 74 65 2d 70 61 63 6b hon3.9/site-pack
4520: 61 67 65 73 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 ages/flask/app.p
4530: 79 26 71 75 6f 74 3b 2c 20 6c 69 6e 65 20 31 38 y&quot;, line 18
4540: 36 37 2c 20 69 6e 20 68 61 6e 64 6c 65 5f 65 78 67, in handle_ex
4550: 63 65 70 74 69 6f 6e 0a 20 20 20 20 72 65 72 61 ception.    rera
4560: 69 73 65 28 65 78 63 5f 74 79 70 65 2c 20 65 78 ise(exc_type, ex
4570: 63 5f 76 61 6c 75 65 2c 20 74 62 29 0a 20 20 46 c_value, tb).  F
4580: 69 6c 65 20 26 71 75 6f 74 3b 2f 75 73 72 2f 6c ile &quot;/usr/l
4590: 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 ocal/lib/python3
45a0: 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 .9/site-packages
45b0: 2f 66 6c 61 73 6b 2f 5f 63 6f 6d 70 61 74 2e 70 /flask/_compat.p
45c0: 79 26 71 75 6f 74 3b 2c 20 6c 69 6e 65 20 33 39 y&quot;, line 39
45d0: 2c 20 69 6e 20 72 65 72 61 69 73 65 0a 20 20 20 , in reraise.   
45e0: 20 72 61 69 73 65 20 76 61 6c 75 65 0a 20 20 46  raise value.  F
45f0: 69 6c 65 20 26 71 75 6f 74 3b 2f 75 73 72 2f 6c ile &quot;/usr/l
4600: 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 ocal/lib/python3
4610: 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 .9/site-packages
4620: 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 79 26 71 75 /flask/app.py&qu
4630: 6f 74 3b 2c 20 6c 69 6e 65 20 32 34 34 37 2c 20 ot;, line 2447, 
4640: 69 6e 20 77 73 67 69 5f 61 70 70 0a 20 20 20 20 in wsgi_app.    
4650: 72 65 73 70 6f 6e 73 65 20 3d 20 73 65 6c 66 2e response = self.
4660: 66 75 6c 6c 5f 64 69 73 70 61 74 63 68 5f 72 65 full_dispatch_re
4670: 71 75 65 73 74 28 29 0a 20 20 46 69 6c 65 20 26 quest().  File &
4680: 71 75 6f 74 3b 2f 75 73 72 2f 6c 6f 63 61 6c 2f quot;/usr/local/
4690: 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f 73 69 lib/python3.9/si
46a0: 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c 61 73 te-packages/flas
46b0: 6b 2f 61 70 70 2e 70 79 26 71 75 6f 74 3b 2c 20 k/app.py&quot;, 
46c0: 6c 69 6e 65 20 31 39 35 32 2c 20 69 6e 20 66 75 line 1952, in fu
46d0: 6c 6c 5f 64 69 73 70 61 74 63 68 5f 72 65 71 75 ll_dispatch_requ
46e0: 65 73 74 0a 20 20 20 20 72 76 20 3d 20 73 65 6c est.    rv = sel
46f0: 66 2e 68 61 6e 64 6c 65 5f 75 73 65 72 5f 65 78 f.handle_user_ex
4700: 63 65 70 74 69 6f 6e 28 65 29 0a 20 20 46 69 6c ception(e).  Fil
4710: 65 20 26 71 75 6f 74 3b 2f 75 73 72 2f 6c 6f 63 e &quot;/usr/loc
4720: 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 al/lib/python3.9
4730: 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 /site-packages/f
4740: 6c 61 73 6b 2f 61 70 70 2e 70 79 26 71 75 6f 74 lask/app.py&quot
4750: 3b 2c 20 6c 69 6e 65 20 31 38 32 31 2c 20 69 6e ;, line 1821, in
4760: 20 68 61 6e 64 6c 65 5f 75 73 65 72 5f 65 78 63  handle_user_exc
4770: 65 70 74 69 6f 6e 0a 20 20 20 20 72 65 72 61 69 eption.    rerai
4780: 73 65 28 65 78 63 5f 74 79 70 65 2c 20 65 78 63 se(exc_type, exc
4790: 5f 76 61 6c 75 65 2c 20 74 62 29 0a 20 20 46 69 _value, tb).  Fi
47a0: 6c 65 20 26 71 75 6f 74 3b 2f 75 73 72 2f 6c 6f le &quot;/usr/lo
47b0: 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e cal/lib/python3.
47c0: 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 9/site-packages/
47d0: 66 6c 61 73 6b 2f 5f 63 6f 6d 70 61 74 2e 70 79 flask/_compat.py
47e0: 26 71 75 6f 74 3b 2c 20 6c 69 6e 65 20 33 39 2c &quot;, line 39,
47f0: 20 69 6e 20 72 65 72 61 69 73 65 0a 20 20 20 20  in reraise.    
4800: 72 61 69 73 65 20 76 61 6c 75 65 0a 20 20 46 69 raise value.  Fi
4810: 6c 65 20 26 71 75 6f 74 3b 2f 75 73 72 2f 6c 6f le &quot;/usr/lo
4820: 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e cal/lib/python3.
4830: 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 9/site-packages/
4840: 66 6c 61 73 6b 2f 61 70 70 2e 70 79 26 71 75 6f flask/app.py&quo
4850: 74 3b 2c 20 6c 69 6e 65 20 31 39 35 30 2c 20 69 t;, line 1950, i
4860: 6e 20 66 75 6c 6c 5f 64 69 73 70 61 74 63 68 5f n full_dispatch_
4870: 72 65 71 75 65 73 74 0a 20 20 20 20 72 76 20 3d request.    rv =
4880: 20 73 65 6c 66 2e 64 69 73 70 61 74 63 68 5f 72  self.dispatch_r
4890: 65 71 75 65 73 74 28 29 0a 20 20 46 69 6c 65 20 equest().  File 
48a0: 26 71 75 6f 74 3b 2f 75 73 72 2f 6c 6f 63 61 6c &quot;/usr/local
48b0: 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f 73 /lib/python3.9/s
48c0: 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c 61 ite-packages/fla
48d0: 73 6b 2f 61 70 70 2e 70 79 26 71 75 6f 74 3b 2c sk/app.py&quot;,
48e0: 20 6c 69 6e 65 20 31 39 33 36 2c 20 69 6e 20 64  line 1936, in d
48f0: 69 73 70 61 74 63 68 5f 72 65 71 75 65 73 74 0a ispatch_request.
4900: 20 20 20 20 72 65 74 75 72 6e 20 73 65 6c 66 2e     return self.
4910: 76 69 65 77 5f 66 75 6e 63 74 69 6f 6e 73 5b 72 view_functions[r
4920: 75 6c 65 2e 65 6e 64 70 6f 69 6e 74 5d 28 2a 2a ule.endpoint](**
4930: 72 65 71 2e 76 69 65 77 5f 61 72 67 73 29 0a 20 req.view_args). 
4940: 20 46 69 6c 65 20 26 71 75 6f 74 3b 2f 55 73 65  File &quot;/Use
4950: 72 73 2f 73 6d 63 6d 69 6c 6c 61 6e 2f 6b 75 2d rs/smcmillan/ku-
4960: 73 6f 6c 61 72 2d 63 61 72 2f 54 65 6c 65 6d 65 solar-car/Teleme
4970: 74 72 79 53 65 72 76 65 72 2f 6d 61 69 6e 2e 70 tryServer/main.p
4980: 79 26 71 75 6f 74 3b 2c 20 6c 69 6e 65 20 39 38 y&quot;, line 98
4990: 2c 20 69 6e 20 66 72 6f 6d 43 61 72 0a 20 20 20 , in fromCar.   
49a0: 20 61 75 74 68 20 3d 20 72 65 71 75 65 73 74 2e  auth = request.
49b0: 68 65 61 64 65 72 73 5b 27 41 75 74 68 65 6e 74 headers['Authent
49c0: 69 63 61 74 69 6f 6e 27 5d 0a 20 20 46 69 6c 65 ication'].  File
49d0: 20 26 71 75 6f 74 3b 2f 75 73 72 2f 6c 6f 63 61  &quot;/usr/loca
49e0: 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f l/lib/python3.9/
49f0: 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 77 65 site-packages/we
4a00: 72 6b 7a 65 75 67 2f 64 61 74 61 73 74 72 75 63 rkzeug/datastruc
4a10: 74 75 72 65 73 2e 70 79 26 71 75 6f 74 3b 2c 20 tures.py&quot;, 
4a20: 6c 69 6e 65 20 31 34 36 33 2c 20 69 6e 20 5f 5f line 1463, in __
4a30: 67 65 74 69 74 65 6d 5f 5f 0a 20 20 20 20 72 65 getitem__.    re
4a40: 74 75 72 6e 20 5f 75 6e 69 63 6f 64 69 66 79 5f turn _unicodify_
4a50: 68 65 61 64 65 72 5f 76 61 6c 75 65 28 73 65 6c header_value(sel
4a60: 66 2e 65 6e 76 69 72 6f 6e 5b 26 71 75 6f 74 3b f.environ[&quot;
4a70: 48 54 54 50 5f 26 71 75 6f 74 3b 20 2b 20 6b 65 HTTP_&quot; + ke
4a80: 79 5d 29 0a 4b 65 79 45 72 72 6f 72 3a 20 27 48 y]).KeyError: 'H
4a90: 54 54 50 5f 41 55 54 48 45 4e 54 49 43 41 54 49 TTP_AUTHENTICATI
4aa0: 4f 4e 27 3c 2f 74 65 78 74 61 72 65 61 3e 0a 20 ON'</textarea>. 
4ab0: 20 3c 2f 66 6f 72 6d 3e 0a 3c 2f 64 69 76 3e 0a  </form>.</div>.
4ac0: 3c 64 69 76 20 63 6c 61 73 73 3d 22 65 78 70 6c <div class="expl
4ad0: 61 6e 61 74 69 6f 6e 22 3e 0a 20 20 54 68 65 20 anation">.  The 
4ae0: 64 65 62 75 67 67 65 72 20 63 61 75 67 68 74 20 debugger caught 
4af0: 61 6e 20 65 78 63 65 70 74 69 6f 6e 20 69 6e 20 an exception in 
4b00: 79 6f 75 72 20 57 53 47 49 20 61 70 70 6c 69 63 your WSGI applic
4b10: 61 74 69 6f 6e 2e 20 20 59 6f 75 20 63 61 6e 20 ation.  You can 
4b20: 6e 6f 77 0a 20 20 6c 6f 6f 6b 20 61 74 20 74 68 now.  look at th
4b30: 65 20 74 72 61 63 65 62 61 63 6b 20 77 68 69 63 e traceback whic
4b40: 68 20 6c 65 64 20 74 6f 20 74 68 65 20 65 72 72 h led to the err
4b50: 6f 72 2e 20 20 3c 73 70 61 6e 20 63 6c 61 73 73 or.  <span class
4b60: 3d 22 6e 6f 6a 61 76 61 73 63 72 69 70 74 22 3e ="nojavascript">
4b70: 0a 20 20 49 66 20 79 6f 75 20 65 6e 61 62 6c 65 .  If you enable
4b80: 20 4a 61 76 61 53 63 72 69 70 74 20 79 6f 75 20  JavaScript you 
4b90: 63 61 6e 20 61 6c 73 6f 20 75 73 65 20 61 64 64 can also use add
4ba0: 69 74 69 6f 6e 61 6c 20 66 65 61 74 75 72 65 73 itional features
4bb0: 20 73 75 63 68 20 61 73 20 63 6f 64 65 0a 20 20  such as code.  
4bc0: 65 78 65 63 75 74 69 6f 6e 20 28 69 66 20 74 68 execution (if th
4bd0: 65 20 65 76 61 6c 65 78 20 66 65 61 74 75 72 65 e evalex feature
4be0: 20 69 73 20 65 6e 61 62 6c 65 64 29 2c 20 61 75  is enabled), au
4bf0: 74 6f 6d 61 74 69 63 20 70 61 73 74 69 6e 67 20 tomatic pasting 
4c00: 6f 66 20 74 68 65 0a 20 20 65 78 63 65 70 74 69 of the.  excepti
4c10: 6f 6e 73 20 61 6e 64 20 6d 75 63 68 20 6d 6f 72 ons and much mor
4c20: 65 2e 3c 2f 73 70 61 6e 3e 0a 3c 2f 64 69 76 3e e.</span>.</div>
4c30: 0a 20 20 20 20 20 20 3c 64 69 76 20 63 6c 61 73 .      <div clas
4c40: 73 3d 22 66 6f 6f 74 65 72 22 3e 0a 20 20 20 20 s="footer">.    
4c50: 20 20 20 20 42 72 6f 75 67 68 74 20 74 6f 20 79     Brought to y
4c60: 6f 75 20 62 79 20 3c 73 74 72 6f 6e 67 20 63 6c ou by <strong cl
4c70: 61 73 73 3d 22 61 72 74 68 75 72 22 3e 44 4f 4e ass="arthur">DON
4c80: 27 54 20 50 41 4e 49 43 3c 2f 73 74 72 6f 6e 67 'T PANIC</strong
4c90: 3e 2c 20 79 6f 75 72 0a 20 20 20 20 20 20 20 20 >, your.        
4ca0: 66 72 69 65 6e 64 6c 79 20 57 65 72 6b 7a 65 75 friendly Werkzeu
4cb0: 67 20 70 6f 77 65 72 65 64 20 74 72 61 63 65 62 g powered traceb
4cc0: 61 63 6b 20 69 6e 74 65 72 70 72 65 74 65 72 2e ack interpreter.
4cd0: 0a 20 20 20 20 20 20 3c 2f 64 69 76 3e 0a 20 20 .      </div>.  
4ce0: 20 20 3c 2f 64 69 76 3e 0a 0a 20 20 20 20 3c 64   </div>..    <d
4cf0: 69 76 20 63 6c 61 73 73 3d 22 70 69 6e 2d 70 72 iv class="pin-pr
4d00: 6f 6d 70 74 22 3e 0a 20 20 20 20 20 20 3c 64 69 ompt">.      <di
4d10: 76 20 63 6c 61 73 73 3d 22 69 6e 6e 65 72 22 3e v class="inner">
4d20: 0a 20 20 20 20 20 20 20 20 3c 68 33 3e 43 6f 6e .        <h3>Con
4d30: 73 6f 6c 65 20 4c 6f 63 6b 65 64 3c 2f 68 33 3e sole Locked</h3>
4d40: 0a 20 20 20 20 20 20 20 20 3c 70 3e 0a 20 20 20 .        <p>.   
4d50: 20 20 20 20 20 20 20 54 68 65 20 63 6f 6e 73 6f        The conso
4d60: 6c 65 20 69 73 20 6c 6f 63 6b 65 64 20 61 6e 64 le is locked and
4d70: 20 6e 65 65 64 73 20 74 6f 20 62 65 20 75 6e 6c  needs to be unl
4d80: 6f 63 6b 65 64 20 62 79 20 65 6e 74 65 72 69 6e ocked by enterin
4d90: 67 20 74 68 65 20 50 49 4e 2e 0a 20 20 20 20 20 g the PIN..     
4da0: 20 20 20 20 20 59 6f 75 20 63 61 6e 20 66 69 6e      You can fin
4db0: 64 20 74 68 65 20 50 49 4e 20 70 72 69 6e 74 65 d the PIN printe
4dc0: 64 20 6f 75 74 20 6f 6e 20 74 68 65 20 73 74 61 d out on the sta
4dd0: 6e 64 61 72 64 20 6f 75 74 70 75 74 20 6f 66 20 ndard output of 
4de0: 79 6f 75 72 0a 20 20 20 20 20 20 20 20 20 20 73 your.          s
4df0: 68 65 6c 6c 20 74 68 61 74 20 72 75 6e 73 20 74 hell that runs t
4e00: 68 65 20 73 65 72 76 65 72 2e 0a 20 20 20 20 20 he server..     
4e10: 20 20 20 3c 66 6f 72 6d 3e 0a 20 20 20 20 20 20    <form>.      
4e20: 20 20 20 20 3c 70 3e 50 49 4e 3a 0a 20 20 20 20     <p>PIN:.    
4e30: 20 20 20 20 20 20 20 20 3c 69 6e 70 75 74 20 74         <input t
4e40: 79 70 65 3d 74 65 78 74 20 6e 61 6d 65 3d 70 69 ype=text name=pi
4e50: 6e 20 73 69 7a 65 3d 31 34 3e 0a 20 20 20 20 20 n size=14>.     
4e60: 20 20 20 20 20 20 20 3c 69 6e 70 75 74 20 74 79        <input ty
4e70: 70 65 3d 73 75 62 6d 69 74 20 6e 61 6d 65 3d 62 pe=submit name=b
4e80: 74 6e 20 76 61 6c 75 65 3d 22 43 6f 6e 66 69 72 tn value="Confir
4e90: 6d 20 50 69 6e 22 3e 0a 20 20 20 20 20 20 20 20 m Pin">.        
4ea0: 3c 2f 66 6f 72 6d 3e 0a 20 20 20 20 20 20 3c 2f </form>.      </
4eb0: 64 69 76 3e 0a 20 20 20 20 3c 2f 64 69 76 3e 0a div>.    </div>.
4ec0: 20 20 3c 2f 62 6f 64 79 3e 0a 3c 2f 68 74 6d 6c   </body>.</html
4ed0: 3e 0a 0a 3c 21 2d 2d 0a 0a 54 72 61 63 65 62 61 >..<!--..Traceba
4ee0: 63 6b 20 28 6d 6f 73 74 20 72 65 63 65 6e 74 20 ck (most recent 
4ef0: 63 61 6c 6c 20 6c 61 73 74 29 3a 0a 20 20 46 69 call last):.  Fi
4f00: 6c 65 20 22 2f 75 73 72 2f 6c 6f 63 61 6c 2f 6c le "/usr/local/l
4f10: 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f 73 69 74 ib/python3.9/sit
4f20: 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c 61 73 6b e-packages/flask
4f30: 2f 61 70 70 2e 70 79 22 2c 20 6c 69 6e 65 20 32 /app.py", line 2
4f40: 34 36 34 2c 20 69 6e 20 5f 5f 63 61 6c 6c 5f 5f 464, in __call__
4f50: 0a 20 20 20 20 72 65 74 75 72 6e 20 73 65 6c 66 .    return self
4f60: 2e 77 73 67 69 5f 61 70 70 28 65 6e 76 69 72 6f .wsgi_app(enviro
4f70: 6e 2c 20 73 74 61 72 74 5f 72 65 73 70 6f 6e 73 n, start_respons
4f80: 65 29 0a 20 20 46 69 6c 65 20 22 2f 75 73 72 2f e).  File "/usr/
4f90: 6c 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e local/lib/python
4fa0: 33 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 3.9/site-package
4fb0: 73 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 79 22 2c s/flask/app.py",
4fc0: 20 6c 69 6e 65 20 32 34 35 30 2c 20 69 6e 20 77  line 2450, in w
4fd0: 73 67 69 5f 61 70 70 0a 20 20 20 20 72 65 73 70 sgi_app.    resp
4fe0: 6f 6e 73 65 20 3d 20 73 65 6c 66 2e 68 61 6e 64 onse = self.hand
4ff0: 6c 65 5f 65 78 63 65 70 74 69 6f 6e 28 65 29 0a le_exception(e).
5000: 20 20 46 69 6c 65 20 22 2f 75 73 72 2f 6c 6f 63   File "/usr/loc
5010: 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 al/lib/python3.9
5020: 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 /site-packages/f
5030: 6c 61 73 6b 2f 61 70 70 2e 70 79 22 2c 20 6c 69 lask/app.py", li
5040: 6e 65 20 31 38 36 37 2c 20 69 6e 20 68 61 6e 64 ne 1867, in hand
5050: 6c 65 5f 65 78 63 65 70 74 69 6f 6e 0a 20 20 20 le_exception.   
5060: 20 72 65 72 61 69 73 65 28 65 78 63 5f 74 79 70  reraise(exc_typ
5070: 65 2c 20 65 78 63 5f 76 61 6c 75 65 2c 20 74 62 e, exc_value, tb
5080: 29 0a 20 20 46 69 6c 65 20 22 2f 75 73 72 2f 6c ).  File "/usr/l
5090: 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 ocal/lib/python3
50a0: 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 .9/site-packages
50b0: 2f 66 6c 61 73 6b 2f 5f 63 6f 6d 70 61 74 2e 70 /flask/_compat.p
50c0: 79 22 2c 20 6c 69 6e 65 20 33 39 2c 20 69 6e 20 y", line 39, in 
50d0: 72 65 72 61 69 73 65 0a 20 20 20 20 72 61 69 73 reraise.    rais
50e0: 65 20 76 61 6c 75 65 0a 20 20 46 69 6c 65 20 22 e value.  File "
50f0: 2f 75 73 72 2f 6c 6f 63 61 6c 2f 6c 69 62 2f 70 /usr/local/lib/p
5100: 79 74 68 6f 6e 33 2e 39 2f 73 69 74 65 2d 70 61 ython3.9/site-pa
5110: 63 6b 61 67 65 73 2f 66 6c 61 73 6b 2f 61 70 70 ckages/flask/app
5120: 2e 70 79 22 2c 20 6c 69 6e 65 20 32 34 34 37 2c .py", line 2447,
5130: 20 69 6e 20 77 73 67 69 5f 61 70 70 0a 20 20 20  in wsgi_app.   
5140: 20 72 65 73 70 6f 6e 73 65 20 3d 20 73 65 6c 66  response = self
5150: 2e 66 75 6c 6c 5f 64 69 73 70 61 74 63 68 5f 72 .full_dispatch_r
5160: 65 71 75 65 73 74 28 29 0a 20 20 46 69 6c 65 20 equest().  File 
5170: 22 2f 75 73 72 2f 6c 6f 63 61 6c 2f 6c 69 62 2f "/usr/local/lib/
5180: 70 79 74 68 6f 6e 33 2e 39 2f 73 69 74 65 2d 70 python3.9/site-p
5190: 61 63 6b 61 67 65 73 2f 66 6c 61 73 6b 2f 61 70 ackages/flask/ap
51a0: 70 2e 70 79 22 2c 20 6c 69 6e 65 20 31 39 35 32 p.py", line 1952
51b0: 2c 20 69 6e 20 66 75 6c 6c 5f 64 69 73 70 61 74 , in full_dispat
51c0: 63 68 5f 72 65 71 75 65 73 74 0a 20 20 20 20 72 ch_request.    r
51d0: 76 20 3d 20 73 65 6c 66 2e 68 61 6e 64 6c 65 5f v = self.handle_
51e0: 75 73 65 72 5f 65 78 63 65 70 74 69 6f 6e 28 65 user_exception(e
51f0: 29 0a 20 20 46 69 6c 65 20 22 2f 75 73 72 2f 6c ).  File "/usr/l
5200: 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 ocal/lib/python3
5210: 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 .9/site-packages
5220: 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 79 22 2c 20 /flask/app.py", 
5230: 6c 69 6e 65 20 31 38 32 31 2c 20 69 6e 20 68 61 line 1821, in ha
5240: 6e 64 6c 65 5f 75 73 65 72 5f 65 78 63 65 70 74 ndle_user_except
5250: 69 6f 6e 0a 20 20 20 20 72 65 72 61 69 73 65 28 ion.    reraise(
5260: 65 78 63 5f 74 79 70 65 2c 20 65 78 63 5f 76 61 exc_type, exc_va
5270: 6c 75 65 2c 20 74 62 29 0a 20 20 46 69 6c 65 20 lue, tb).  File 
5280: 22 2f 75 73 72 2f 6c 6f 63 61 6c 2f 6c 69 62 2f "/usr/local/lib/
5290: 70 79 74 68 6f 6e 33 2e 39 2f 73 69 74 65 2d 70 python3.9/site-p
52a0: 61 63 6b 61 67 65 73 2f 66 6c 61 73 6b 2f 5f 63 ackages/flask/_c
52b0: 6f 6d 70 61 74 2e 70 79 22 2c 20 6c 69 6e 65 20 ompat.py", line 
52c0: 33 39 2c 20 69 6e 20 72 65 72 61 69 73 65 0a 20 39, in reraise. 
52d0: 20 20 20 72 61 69 73 65 20 76 61 6c 75 65 0a 20    raise value. 
52e0: 20 46 69 6c 65 20 22 2f 75 73 72 2f 6c 6f 63 61  File "/usr/loca
52f0: 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f l/lib/python3.9/
5300: 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 66 6c site-packages/fl
5310: 61 73 6b 2f 61 70 70 2e 70 79 22 2c 20 6c 69 6e ask/app.py", lin
5320: 65 20 31 39 35 30 2c 20 69 6e 20 66 75 6c 6c 5f e 1950, in full_
5330: 64 69 73 70 61 74 63 68 5f 72 65 71 75 65 73 74 dispatch_request
5340: 0a 20 20 20 20 72 76 20 3d 20 73 65 6c 66 2e 64 .    rv = self.d
5350: 69 73 70 61 74 63 68 5f 72 65 71 75 65 73 74 28 ispatch_request(
5360: 29 0a 20 20 46 69 6c 65 20 22 2f 75 73 72 2f 6c ).  File "/usr/l
5370: 6f 63 61 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 ocal/lib/python3
5380: 2e 39 2f 73 69 74 65 2d 70 61 63 6b 61 67 65 73 .9/site-packages
5390: 2f 66 6c 61 73 6b 2f 61 70 70 2e 70 79 22 2c 20 /flask/app.py", 
53a0: 6c 69 6e 65 20 31 39 33 36 2c 20 69 6e 20 64 69 line 1936, in di
53b0: 73 70 61 74 63 68 5f 72 65 71 75 65 73 74 0a 20 spatch_request. 
53c0: 20 20 20 72 65 74 75 72 6e 20 73 65 6c 66 2e 76    return self.v
53d0: 69 65 77 5f 66 75 6e 63 74 69 6f 6e 73 5b 72 75 iew_functions[ru
53e0: 6c 65 2e 65 6e 64 70 6f 69 6e 74 5d 28 2a 2a 72 le.endpoint](**r
53f0: 65 71 2e 76 69 65 77 5f 61 72 67 73 29 0a 20 20 eq.view_args).  
5400: 46 69 6c 65 20 22 2f 55 73 65 72 73 2f 73 6d 63 File "/Users/smc
5410: 6d 69 6c 6c 61 6e 2f 6b 75 2d 73 6f 6c 61 72 2d millan/ku-solar-
5420: 63 61 72 2f 54 65 6c 65 6d 65 74 72 79 53 65 72 car/TelemetrySer
5430: 76 65 72 2f 6d 61 69 6e 2e 70 79 22 2c 20 6c 69 ver/main.py", li
5440: 6e 65 20 39 38 2c 20 69 6e 20 66 72 6f 6d 43 61 ne 98, in fromCa
5450: 72 0a 20 20 20 20 61 75 74 68 20 3d 20 72 65 71 r.    auth = req
5460: 75 65 73 74 2e 68 65 61 64 65 72 73 5b 27 41 75 uest.headers['Au
5470: 74 68 65 6e 74 69 63 61 74 69 6f 6e 27 5d 0a 20 thentication']. 
5480: 20 46 69 6c 65 20 22 2f 75 73 72 2f 6c 6f 63 61  File "/usr/loca
5490: 6c 2f 6c 69 62 2f 70 79 74 68 6f 6e 33 2e 39 2f l/lib/python3.9/
54a0: 73 69 74 65 2d 70 61 63 6b 61 67 65 73 2f 77 65 site-packages/we
54b0: 72 6b 7a 65 75 67 2f 64 61 74 61 73 74 72 75 63 rkzeug/datastruc
54c0: 74 75 72 65 73 2e 70 79 22 2c 20 6c 69 6e 65 20 tures.py", line 
54d0: 31 34 36 33 2c 20 69 6e 20 5f 5f 67 65 74 69 74 1463, in __getit
54e0: 65 6d 5f 5f 0a 20 20 20 20 72 65 74 75 72 6e 20 em__.    return 
54f0: 5f 75 6e 69 63 6f 64 69 66 79 5f 68 65 61 64 65 _unicodify_heade
5500: 72 5f 76 61 6c 75 65 28 73 65 6c 66 2e 65 6e 76 r_value(self.env
5510: 69 72 6f 6e 5b 22 48 54 54 50 5f 22 20 2b 20 6b iron["HTTP_" + k
5520: 65 79 5d 29 0a 4b 65 79 45 72 72 6f 72 3a 20 27 ey]).KeyError: '
5530: 48 54 54 50 5f 41 55 54 48 45 4e 54 49 43 41 54 HTTP_AUTHENTICAT
5540: 49 4f 4e 27 0a 0a 2d 2d 3e 0a                   ION'..-->.
== Info: Closing connection 0
